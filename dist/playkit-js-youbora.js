!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=24)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_LEVEL=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(31),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:o.DEBUG,INFO:o.INFO,TIME:o.TIME,WARN:o.WARN,ERROR:o.ERROR,OFF:o.OFF},u=function(){function e(t){r(this,e),o.useDefaults(t||{})}return i(e,[{key:"getLogger",value:function(e){return e?o.get(e):o}}]),e}(),l=new u({defaultLevel:o.DEBUG});t.default=l,t.LOG_LEVEL=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this._id=t.id,this._active=t.active,this._label=t.label,this._language=t.language,this._index=t.index}return i(e,[{key:"id",get:function(){return this._id}},{key:"active",get:function(){return this._active},set:function(e){this._active=e}},{key:"label",get:function(){return this._label}},{key:"language",get:function(){return this._language}},{key:"index",get:function(){return this._index}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1,this.payload=n}return i(e,[{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={isNumber:function(e){return Number(e)===e},isInt:function(e){return this.isNumber(e)&&e%1==0},isFloat:function(e){return this.isNumber(e)&&e%1!=0}},s={capitlize:function(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},endsWith:function(e,t){return"string"==typeof e&&"string"==typeof t&&-1!=e.indexOf(t,e.length-t.length)}},u={merge:function(e){var t={},n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;Object.assign(t,s)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return t},isObject:function(e){return e&&"object"===(void 0===e?"undefined":a(e))&&!Array.isArray(e)},mergeDeep:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var o=n.shift();if(this.isObject(e)&&this.isObject(o))for(var s in o)this.isObject(o[s])?(e[s]||Object.assign(e,i({},s,{})),this.mergeDeep(e[s],o[s])):Object.assign(e,i({},s,o[s]));return this.mergeDeep.apply(this,[e].concat(r(n)))},copyDeep:function(e){var t=this,n=void 0;return Array.isArray(e)?(n=e.length>0?e.slice(0):[],n.forEach(function(e,r){("object"===(void 0===e?"undefined":a(e))&&e!=={}||Array.isArray(e)&&e.length>0)&&(n[r]=t.copyDeep(e))})):"object"===(void 0===e?"undefined":a(e))?(n=Object.assign({},e),Object.keys(n).forEach(function(e){("object"===a(n[e])&&n[e]!=={}||Array.isArray(n[e])&&n[e].length>0)&&(n[e]=t.copyDeep(n[e]))})):n=e,n},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getPropertyPath:function(e,t){return t.split(".").reduce(function(e,t){return void 0===e||null===e?e:e[t]},e)},hasPropertyPath:function(e,t){if(!t)return!1;for(var n=t.split("."),r=0;r<n.length;r++){var i=n[r];if(!e||!e.hasOwnProperty(i))return!1;e=e[i]}return!0},defer:function(){var e=void 0,t=void 0,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n},bind:function(e,t){return function(){t.apply(e,arguments)}}},l={uniqueId:function(e){var t=2+(!e||e<0?0:e-2);return"_"+Math.random().toString(36).substr(2,t)},guid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},c={appendChild:function(e,t){e&&t&&e.appendChild&&e.appendChild(t)},getElementById:function(e){return document.getElementById(e)},createElement:function(e){return document.createElement(e)},loadScriptAsync:function(e){var t=this;return new Promise(function(n,r){var i=!1,a=document.getElementsByTagName("script")[0],o=t.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.onload=o.onreadystatechange=function(){i||this.readyState&&"complete"!==this.readyState||(i=!0,n(this))},o.onerror=o.onabort=r,a&&a.parentNode&&a.parentNode.insertBefore(o,a)})}},d={execute:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r=arguments[3],i=new XMLHttpRequest;return new Promise(function(a,o){i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=JSON.parse(i.responseText);a(e)}else o(i.responseText)},i.open(n,e),r&&r.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(t)})}};t.Number=o,t.String=s,t.Object=u,t.Generator=l,t.Dom=c,t.Http=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._kind=e.kind,n}return a(t,e),o(t,[{key:"kind",get:function(){return this._kind}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._bandwidth=e.bandwidth,n._width=e.width,n._height=e.height,n}return a(t,e),o(t,[{key:"bandwidth",get:function(){return this._bandwidth}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),s=r(o),u=n(2),l=(r(u),function(){function e(){i(this,e),this._bindingMap=new s.default}return a(e,[{key:"destroy",value:function(){return this.removeAll(),this._bindingMap=null,Promise.resolve()}},{key:"listen",value:function(e,t,n){var r=new c(e,t,n);this._bindingMap&&this._bindingMap.push(t,r)}},{key:"unlisten",value:function(e,t){if(this._bindingMap)for(var n=this._bindingMap.get(t),r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.unlisten(),this._bindingMap&&this._bindingMap.remove(t,i))}}},{key:"removeAll",value:function(){if(this._bindingMap){var e=this._bindingMap.getAll(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.unlisten()}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}this._bindingMap&&this._bindingMap.clear()}}}]),e}()),c=function(){function e(t,n,r){i(this,e),this.target=t,this.type=n,this.listener=r,this.target.addEventListener(n,r,!1)}return a(e,[{key:"unlisten",value:function(){this.target&&(this.target.removeEventListener(this.type,this.listener,!1),this.target=null,this.listener=null)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM_EVENTS=t.HTML5_EVENTS=t.PLAYER_EVENTS=void 0;var r=n(3),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),a={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting"},o={VIDEO_TRACK_CHANGED:"videotrackchanged",AUDIO_TRACK_CHANGED:"audiotrackchanged",TEXT_TRACK_CHANGED:"texttrackchanged",TRACKS_CHANGED:"trackschanged",ABR_MODE_CHANGED:"abrmodechanged",PLAYER_STATE_CHANGED:"playerstatechanged",FIRST_PLAY:"firstplay",SOURCE_SELECTED:"sourceselected",AD_LOADED:"adloaded",AD_STARTED:"adstarted",AD_RESUMED:"adresumed",AD_PAUSED:"adpaused",AD_CLICKED:"adclicked",AD_SKIPPED:"adskipped",AD_COMPLETED:"adcompleted",AD_ERROR:"aderror",ALL_ADS_COMPLETED:"alladscompleted",AD_BREAK_START:"adbreakstart",AD_BREAK_END:"adbreakend",AD_FIRST_QUARTILE:"adfirstquartile",AD_MIDPOINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",USER_CLOSED_AD:"userclosedad",AD_VOLUME_CHANGED:"advolumechanged",AD_MUTED:"admuted",AD_PROGRESS:"adprogress"},s=i.Object.merge([a,o]);t.PLAYER_EVENTS=s,t.HTML5_EVENTS=a,t.CUSTOM_EVENTS=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),c=r(l),d=n(2),h=r(d),p=n(12),f=r(p),g=n(8),y=n(18),m=r(y),v=n(3),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),b=n(0),w=r(b),E=n(20),T=r(E),k=n(17),A=r(k),P=n(11),S=(r(P),n(25)),M=r(S),O=n(27),R=r(O),N=n(1),D=(r(N),n(6)),C=r(D),x=n(4),V=r(x),L=n(5),I=r(L),j=n(23),H=r(j),B=n(37),G=r(B),q=n(35),U=r(q);n(32);var z=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._tracks=[],r._config={},r._firstPlay=!0,r._stateManager=new M.default(r),r._pluginManager=new A.default,r._eventManager=new c.default,r._playbackMiddleware=new H.default,r._env=(new U.default).getResult(),r._createReadyPromise(),r._appendPlayerContainer(e),r.configure(n),r}return o(t,e),u(t,[{key:"configure",value:function(e){var n=this._engine;this._maybeResetPlayer(e),this._config=_.Object.mergeDeep(_.Object.isEmptyObject(this._config)?t._defaultConfig:this._config,e),this._selectEngine()&&(this._appendEngineEl(),this._attachMedia(),this._maybeLoadPlugins(n),this._handlePlaybackConfig())}},{key:"_maybeResetPlayer",value:function(e){this._engine&&e.sources&&(t._logger.debug("New sources on existing engine: reset engine to change media"),this._reset())}},{key:"_maybeLoadPlugins",value:function(e){this._engine&&!e&&(t._logger.debug("Engine created for the first time: load plugins"),this._loadPlugins())}},{key:"_reset",value:function(){this._engine&&this._engine.destroy(),this._tracks=[],this._firstPlay=!0,this._eventManager.removeAll(),this._createReadyPromise()}},{key:"_createReadyPromise",value:function(){var e=this;this._readyPromise=new Promise(function(t,n){e._eventManager.listen(e,g.CUSTOM_EVENTS.TRACKS_CHANGED,function(){t()}),e._eventManager.listen(e,g.HTML5_EVENTS.ERROR,n)})}},{key:"destroy",value:function(){this._engine&&this._engine.destroy(),this._eventManager.destroy(),this._pluginManager.destroy(),this._stateManager.destroy(),this._config={},this._tracks=[],this._readyPromise=null,this._firstPlay=!0}},{key:"_loadPlugins",value:function(){var e=this._config.plugins;for(var t in e){this._pluginManager.load(t,this,e[t]);var n=this._pluginManager.get(t);n&&"function"==typeof n.getMiddlewareImpl&&this._playbackMiddleware.use(n.getMiddlewareImpl())}}},{key:"_selectEngine",value:function(){return!!(this._config.sources&&this._config.playback&&this._config.playback.streamPriority)&&this._selectEngineByPriority()}},{key:"_selectEngineByPriority",value:function(){var e=this,n=this._config.playback.streamPriority,r=this._config.sources,i=!0,a=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=function(){var n=u.value,i="string"==typeof n.engine?n.engine.toLowerCase():"",a="string"==typeof n.format?n.format.toLowerCase():"",o=t._engines.find(function(e){return e.id===i});if(o){var s=r[a];if(s&&s.length>0){var l=s[0];if(o.canPlayType(l.mimetype))return t._logger.debug("Source selected: ",s),e._loadEngine(o,l),e.dispatchEvent(new h.default(g.CUSTOM_EVENTS.SOURCE_SELECTED,{selectedSource:s})),{v:!0}}}}();if("object"===(void 0===c?"undefined":s(c)))return c.v}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return t._logger.warn("No playable engines was found to play the given sources"),!1}},{key:"_loadEngine",value:function(e,t){this._engine=e.createEngine(t,this._config)}},{key:"_attachMedia",value:function(){var e=this;if(this._engine){for(var t in g.HTML5_EVENTS)this._eventManager.listen(this._engine,g.HTML5_EVENTS[t],function(t){return e.dispatchEvent(t)});this._eventManager.listen(this._engine,g.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedVideoTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,g.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedAudioTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,g.CUSTOM_EVENTS.TEXT_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedTextTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,g.CUSTOM_EVENTS.ABR_MODE_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this,g.HTML5_EVENTS.PLAY,this._onPlay.bind(this))}}},{key:"_handlePlaybackConfig",value:function(){this._config.playback&&(this._config.playback.muted&&(this.muted=!0),this._config.playback.playsinline&&(this.playsinline=!0),"auto"===this._config.playback.preload&&this.load(),this._canAutoPlay()&&this.play())}},{key:"_canAutoPlay",value:function(){if(!this._config.playback.autoplay)return!1;var e=this._env.device.type,t=this._env.os.name;return"mobile"!==e&&"tablet"!==e||("iOS"===t?this.muted&&this.playsinline:this.muted)}},{key:"_appendPlayerContainer",value:function(e){if(!e)throw new Error("targetId is not found, it must be pass on initialization");if(void 0===this._el){this._createPlayerContainer();var t=_.Dom.getElementById(e);_.Dom.appendChild(t,this._el)}}},{key:"_createPlayerContainer",value:function(){this._el=_.Dom.createElement("div"),this._el.id=_.Generator.uniqueId(5),this._el.className="playkit-container",this._el.setAttribute("tabindex","-1")}},{key:"_appendEngineEl",value:function(){null!=this._el&&null!=this._engine&&_.Dom.appendChild(this._el,this._engine.getVideoElement())}},{key:"getView",value:function(){return this._el}},{key:"getTracks",value:function(e){return this._getTracksByType(e)}},{key:"_getTracksByType",value:function(e){return e?this._tracks.filter(function(t){return e===R.default.VIDEO?t instanceof C.default:e===R.default.AUDIO?t instanceof V.default:e!==R.default.TEXT||t instanceof I.default}):this._tracks}},{key:"getActiveTracks",value:function(){return{video:this._getTracksByType(R.default.VIDEO).find(function(e){return e.active}),audio:this._getTracksByType(R.default.AUDIO).find(function(e){return e.active}),text:this._getTracksByType(R.default.TEXT).find(function(e){return e.active})}}},{key:"selectTrack",value:function(e){this._engine&&(e instanceof C.default?this._engine.selectVideoTrack(e):e instanceof V.default?this._engine.selectAudioTrack(e):e instanceof I.default&&this._engine.selectTextTrack(e))}},{key:"hideTextTrack",value:function(){this._engine&&(this._engine.hideTextTrack(),this._getTracksByType(R.default.TEXT).map(function(e){return e.active=!1}))}},{key:"enableAdaptiveBitrate",value:function(){this._engine&&this._engine.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._engine&&this._engine.isAdaptiveBitrateEnabled()}},{key:"_markActiveTrack",value:function(e){var t=void 0;if(e instanceof C.default?t=R.default.VIDEO:e instanceof V.default?t=R.default.AUDIO:e instanceof I.default&&(t=R.default.TEXT),t)for(var n=this.getTracks(t),r=0;r<n.length;r++)n[r].active=e.index===r}},{key:"_onPlay",value:function(){this._firstPlay&&(this._firstPlay=!1,this.dispatchEvent(new h.default(g.CUSTOM_EVENTS.FIRST_PLAY)))}},{key:"ready",value:function(){return this._readyPromise?this._readyPromise:Promise.resolve()}},{key:"load",value:function(){var e=this;if(this._engine){var t=this._config.playback.startTime;this._engine.load(t).then(function(t){e._tracks=t.tracks,e.dispatchEvent(new h.default(g.CUSTOM_EVENTS.TRACKS_CHANGED,{tracks:e._tracks}))}).catch(function(t){e.dispatchEvent(new h.default(g.HTML5_EVENTS.ERROR,t))})}}},{key:"play",value:function(){this._engine&&this._playbackMiddleware.play(this._play.bind(this))}},{key:"_play",value:function(){var e=this;this._engine.src?this._engine.play():(this.load(),this.ready().then(function(){e._engine.play()}))}},{key:"pause",value:function(){this._engine&&this._playbackMiddleware.pause(this._pause.bind(this))}},{key:"_pause",value:function(){this._engine.pause()}},{key:"getVideoElement",value:function(){if(this._engine)return this._engine.getVideoElement()}},{key:"skipAd",value:function(){var e=this._pluginManager.get("ima");e&&"function"==typeof e.skipAd&&e.skipAd()}},{key:"playAdNow",value:function(e){var t=this._pluginManager.get("ima");t&&"function"==typeof t.playAdNow&&t.playAdNow(e)}},{key:"buffered",value:function(){}},{key:"env",get:function(){return this._env}},{key:"config",get:function(){return _.Object.mergeDeep({},this._config)}},{key:"sessionId",set:function(e){this._config.session=this._config.session||{},this._config.session.id=e}},{key:"currentTime",set:function(e){if(this._engine&&_.Number.isNumber(e)){var t=e;e<0&&(t=0),t>this._engine.duration&&(t=this._engine.duration),this._engine.currentTime=t}},get:function(){if(this._engine)return this._engine.currentTime}},{key:"duration",get:function(){if(this._engine)return this._engine.duration}},{key:"volume",set:function(e){if(this._engine&&_.Number.isFloat(e)){var t=e;t<0&&(t=0),t>1&&(t=1),this._engine.volume=t}},get:function(){if(this._engine)return this._engine.volume}},{key:"playbackRate",set:function(e){this._engine&&(this._engine.playbackRate=e)},get:function(){if(this._engine)return this._engine.playbackRate}},{key:"paused",get:function(){if(this._engine)return this._engine.paused}},{key:"seeking",get:function(){if(this._engine)return this._engine.seeking}},{key:"playsinline",set:function(e){this._engine&&(this._engine.playsinline=e)},get:function(){if(this._engine)return this._engine.playsinline}},{key:"muted",set:function(e){this._engine&&(this._engine.muted=e)},get:function(){if(this._engine)return this._engine.muted}},{key:"src",get:function(){if(this._engine)return this._engine.src}},{key:"Event",get:function(){return g.PLAYER_EVENTS}},{key:"State",get:function(){return m.default}},{key:"Track",get:function(){return R.default}}],[{key:"_defaultConfig",get:function(){return _.Object.copyDeep(G.default)}}]),t}(f.default);z._logger=w.default.getLogger("Player"),z._engines=[T.default],t.default=z},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"callNext",value:function(e){e&&e()}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9),s=(r(o),n(0)),u=r(s),l=n(3),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),d=n(7),h=r(d),p=n(14),f=r(p),g=n(2),y=r(g),m=function(){function e(t,n,r){i(this,e),this.name=t,this.player=n,this.eventManager=new h.default,this.logger=u.default.getLogger(this.name),this.config={},c.Object.mergeDeep(this.config,this.constructor.defaultConfig,r)}return a(e,null,[{key:"createPlugin",value:function(e,t){return new this(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"isValid",value:function(){throw new f.default(f.default.TYPE.NOT_IMPLEMENTED_METHOD,"isValid()").getError()}}]),a(e,[{key:"getConfig",value:function(e){return e?this.config[e]:this.config}},{key:"updateConfig",value:function(e){this.config=c.Object.mergeDeep(this.config,e)}},{key:"destroy",value:function(){throw new f.default(f.default.TYPE.NOT_IMPLEMENTED_METHOD,"destroy()").getError()}},{key:"getName",value:function(){return this.name}},{key:"dispatchEvent",value:function(e,t){this.logger.debug("Fire event: "+e,t),this.player.dispatchEvent(new y.default(e,t))}}]),e}();m.defaultConfig={},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),s=(r(o),n(13)),u=r(s),l=function(){function e(){i(this,e),this._listeners=new u.default,this.dispatchTarget=this}return a(e,[{key:"addEventListener",value:function(e,t){this._listeners.push(e,t)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"dispatchEvent",value:function(e){for(var t=this._listeners.get(e.type)||[],n=0;n<t.length;++n){e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.stopped)break}return e.defaultPrevented}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this._map=new Map}return i(e,[{key:"push",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);Array.isArray(n)&&(n.push(t),this._map.set(e,n))}else this._map.set(e,[t])}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=this._map.get(e);return t?t.slice():[]}},{key:"getAll",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this._map.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e=e.concat(o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}},{key:"remove",value:function(e,t){if(this._map.has(e)){var n=this._map.get(e);if(Array.isArray(n))for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}}},{key:"keys",value:function(){return this._map.keys()}},{key:"clear",value:function(){this._map.clear()}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.name=t.name,this.message=t.message(n)}return i(e,[{key:"getError",value:function(){return{name:this.name,message:this.message}}}]),e}();a.TYPE={NOT_REGISTERED_PLUGIN:{name:"PluginNotRegisteredException",message:function(e){return"Cannot load "+e+" plugin. Name not found in the registry"}},NOT_VALID_HANDLER:{name:"PluginHandlerIsNotValidException",message:function(){return"To activate plugin you must provide a class derived from BasePlugin"}},NOT_IMPLEMENTED_METHOD:{name:"NotImplementedException",message:function(e){return e+" method not implemented"}}},t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(12),d=r(c),h=n(14),p=r(h),f=n(8),g=n(0),y=r(g),m=n(1),v=(r(m),n(6)),_=r(v),b=n(4),w=r(b),E=n(5),T=r(E),k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._videoElement=e,o._sourceObj=n,o._config=r,o}return o(t,e),s(t,null,[{key:"isSupported",value:function(){return!0}}]),s(t,[{key:"destroy",value:function(){this._sourceObj=null,this._config=null}},{key:"_onTrackChanged",value:function(e){e instanceof _.default?this._trigger(t.CustomEvents.VIDEO_TRACK_CHANGED,{selectedVideoTrack:e}):e instanceof w.default?this._trigger(t.CustomEvents.AUDIO_TRACK_CHANGED,{selectedAudioTrack:e}):e instanceof T.default&&this._trigger(t.CustomEvents.TEXT_TRACK_CHANGED,{selectedTextTrack:e})}},{key:"_trigger",value:function(e,t){this.dispatchEvent(new l.default(e,t))}},{key:"load",value:function(){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"load").getError()}},{key:"selectVideoTrack",value:function(e){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectVideoTrack").getError()}},{key:"selectAudioTrack",value:function(e){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectAudioTrack").getError()}},{key:"selectTextTrack",value:function(e){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"selectTextTrack").getError()}},{key:"hideTextTrack",value:function(){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"hideTextTrack").getError()}},{key:"enableAdaptiveBitrate",value:function(){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"enableAdaptiveBitrate").getError()}},{key:"isAdaptiveBitrateEnabled",value:function(){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"isAdaptiveBitrateEnabled").getError()}},{key:"src",get:function(){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"get src").getError()}}],[{key:"canPlayType",value:function(e){throw new p.default(p.default.TYPE.NOT_IMPLEMENTED_METHOD,"static canPlayType").getError()}}]),t}(d.default);k.CustomEvents=f.CUSTOM_EVENTS,k.getLogger=y.default.getLogger,t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerMediaSourceAdapter=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(21),s=r(o),u=n(0),l=r(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(t){t&&(e._mediaSourceAdapters.includes(t)?e._logger.debug("Adapter <"+t.id+"> is already registered, do not register again"):(e._logger.debug("Adapter <"+t.id+"> has been registered successfully"),e._mediaSourceAdapters.push(t)))}},{key:"unRegister",value:function(t){var n=e._mediaSourceAdapters.indexOf(t);n>-1&&(e._logger.debug("Unregistered <"+t.id+"> adapter"),e._mediaSourceAdapters.splice(n,1))}},{key:"canPlayType",value:function(t){for(var n=e._mediaSourceAdapters,r=0;r<n.length;r++)if(n[r].canPlayType(t))return e._selectedAdapter=n[r],e._logger.debug("Selected adapter is <"+e._selectedAdapter.id+">"),!0;return!1}},{key:"getMediaSourceAdapter",value:function(t,n,r){return t&&n&&r?(e._selectedAdapter||e.canPlayType(n.mimetype),e._selectedAdapter?e._selectedAdapter.createAdapter(t,n,r):null):null}},{key:"destroy",value:function(){e._selectedAdapter=null}}]),e}();c._logger=l.default.getLogger("MediaSourceProvider"),c._mediaSourceAdapters=[s.default],c._selectedAdapter=null,t.default=c;var d=c.register;t.registerMediaSourceAdapter=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPlugin=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(11),s=r(o),u=n(14),l=r(u),c=n(9),d=(r(c),n(0)),h=r(d),p=h.default.getLogger("PluginManager"),f=function(){function e(){i(this,e),this._plugins=new Map}return a(e,[{key:"load",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e._registry.has(t))throw new l.default(l.default.TYPE.NOT_REGISTERED_PLUGIN,t).getError();var i=e._registry.get(t);return null!=i&&i.isValid()?(this._plugins.set(t,i.createPlugin(t,n,r)),p.debug("Plugin <"+t+"> has been loaded"),!0):(p.debug("Plugin <"+t+"> isn't loaded, isValid()=false"),!1)}},{key:"destroy",value:function(){this._plugins.forEach(this._destroy.bind(this))}},{key:"_destroy",value:function(e,t){e.destroy(),this._plugins.delete(t)}},{key:"get",value:function(e){return this._plugins.get(e)}}],[{key:"register",value:function(t,n){if("function"!=typeof n||n.prototype instanceof s.default==!1)throw new l.default(l.default.TYPE.NOT_VALID_HANDLER).getError();return e._registry.has(t)?(p.debug("Plugin <"+t+"> is already registered, do not register again"),!1):(e._registry.set(t,n),p.debug("Plugin <"+t+"> has been registered successfully"),!0)}},{key:"unRegister",value:function(t){e._registry.has(t)&&(e._registry.delete(t),p.debug("Unregistered <"+t+"> plugin."))}}]),e}();f._registry=new Map,t.default=f;var g=f.register;t.registerPlugin=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={IDLE:"idle",LOADING:"loading",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering"};t.default=r},function(e,t){e.exports={name:"playkit-js",version:"0.3.0",main:"dist/playkit.js",scripts:{clean:"rm -rf ./dist",prebuild:"npm run clean","build:prod":"NODE_ENV=production webpack",build:"webpack",dev:"webpack --progress --colors --watch",test:"NODE_ENV=test karma start --color","test:chrome":"NODE_ENV=test karma start --color --browsers Chrome","test:chrome:dots":"NODE_ENV=test karma start --color --browsers Chrome --reporters dots","test:firefox":"NODE_ENV=test karma start --color --browsers Firefox","test:safari":"NODE_ENV=test karma start --color --browsers Safari","test:watch":"NODE_ENV=test karma start --color --auto-watch",start:"webpack-dev-server",release:"npm run build:prod && npm run commit:dist && standard-version",publish:"git push --follow-tags --no-verify origin develop",eslint:"eslint . --color",flow:"flow check","eslint:flow:test":"npm run eslint && npm run flow && npm run test","commit:dist":"git add --all dist && (git commit -m 'chore: update dist' || exit 0)","prepush-msg:build":"echo '\nRunning build before push...\n' && exit 0","prepush-msg:dist":"echo '\nAdding dist files to a seperate commit...\n' && exit 0","prepush-msg:done":"echo '\nPre push tasks are done.\n' && exit 0"},"pre-push":["prepush-msg:build","prebuild","build","build:prod","prepush-msg:dist","commit:dist","prepush-msg:done"],devDependencies:{"babel-cli":"^6.18.0","babel-core":"^6.18.2","babel-eslint":"^7.1.1","babel-loader":"^6.2.7","babel-plugin-istanbul":"^4.0.0","babel-plugin-transform-class-properties":"^6.22.0","babel-plugin-transform-flow-strip-types":"^6.22.0","babel-preset-es2015":"^6.18.0","babel-register":"^6.23.0",chai:"^3.5.0","cross-env":"^3.1.4","css-loader":"^0.28.4",eslint:"^3.10.0","eslint-loader":"^1.6.1","eslint-plugin-flowtype":"^2.30.0","eslint-plugin-import":"^2.2.0","eslint-plugin-mocha-no-only":"^0.0.5","flow-bin":"latest",istanbul:"^0.4.5",karma:"^1.5.0","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-cli":"^1.0.1","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.0.1","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.2",mocha:"^3.2.0","mocha-cli":"^1.0.1","pre-push":"^0.1.1",sinon:"^2.0.0","sinon-chai":"^2.8.0","standard-version":"^4.0.0","style-loader":"^0.18.2","uglifyjs-webpack-plugin":"^0.4.3",webpack:"latest","webpack-dev-server":"latest"},repository:{type:"git",url:"https://github.com/kaltura/playkit-js"},keywords:["kaltura","player","html5 player"],license:"AGPLV3",bugs:{url:"https://github.com/kaltura/playkit-js/issues"},homepage:"https://github.com/kaltura/playkit-js",dependencies:{"js-logger":"^1.3.0","ua-parser-js":"^0.7.13"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(12),l=r(u),c=n(2),d=r(c),h=n(7),p=r(h),f=n(8),g=n(16),y=r(g),m=n(6),v=(r(m),n(4)),_=(r(v),n(5)),b=(r(_),n(3)),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(b),E=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._eventManager=new p.default,r._createVideoElement(),r._loadMediaSourceAdapter(e,n),r.attach(),r}return o(t,e),s(t,null,[{key:"createEngine",value:function(e,t){return new this(e,t)}},{key:"canPlayType",value:function(e){return y.default.canPlayType(e)}}]),s(t,[{key:"destroy",value:function(){this.detach(),this._mediaSourceAdapter&&(this._mediaSourceAdapter.destroy(),y.default.destroy()),this._el&&(this.pause(),this._el.removeAttribute("src"),this._el.parentNode&&this._el.parentNode.removeChild(this._el)),this._eventManager.destroy()}},{key:"attach",value:function(){var e=this;for(var t in f.HTML5_EVENTS)!function(t){e._eventManager.listen(e._el,f.HTML5_EVENTS[t],function(){e.dispatchEvent(new d.default(f.HTML5_EVENTS[t]))})}(t);this._mediaSourceAdapter&&(this._eventManager.listen(this._mediaSourceAdapter,f.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,f.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,f.CUSTOM_EVENTS.TEXT_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,f.CUSTOM_EVENTS.ABR_MODE_CHANGED,function(t){return e.dispatchEvent(t)}))}},{key:"detach",value:function(){for(var e in f.HTML5_EVENTS)this._eventManager.unlisten(this._el,f.HTML5_EVENTS[e]);this._mediaSourceAdapter&&(this._eventManager.unlisten(this._mediaSourceAdapter,f.CUSTOM_EVENTS.VIDEO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,f.CUSTOM_EVENTS.AUDIO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,f.CUSTOM_EVENTS.TEXT_TRACK_CHANGED))}},{key:"getVideoElement",value:function(){return this._el}},{key:"_createVideoElement",value:function(){this._el=w.Dom.createElement("video"),this._el.id=w.Generator.uniqueId(5),this._el.className="playkit-engine-html5",this._el.controls=!1}},{key:"_loadMediaSourceAdapter",value:function(e,t){this._mediaSourceAdapter=y.default.getMediaSourceAdapter(this.getVideoElement(),e,t)}},{key:"selectVideoTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectVideoTrack(e)}},{key:"selectAudioTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectAudioTrack(e)}},{key:"selectTextTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectTextTrack(e)}},{key:"hideTextTrack",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.hideTextTrack()}},{key:"enableAdaptiveBitrate",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._mediaSourceAdapter&&this._mediaSourceAdapter.isAdaptiveBitrateEnabled()}},{key:"play",value:function(){return this._el.play()}},{key:"pause",value:function(){return this._el.pause()}},{key:"load",value:function(e){return this._mediaSourceAdapter?this._mediaSourceAdapter.load(e):Promise.resolve({})}},{key:"ready",value:function(){}},{key:"id",get:function(){return t.id}},{key:"src",set:function(e){this._el.src=e},get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.src:""}},{key:"currentTime",get:function(){return this._el.currentTime},set:function(e){this._el.currentTime=e}},{key:"duration",get:function(){return this._el.duration}},{key:"volume",set:function(e){this._el.volume=e},get:function(){return this._el.volume}},{key:"paused",get:function(){return this._el.paused}},{key:"seeking",get:function(){return this._el.seeking}},{key:"seekable",get:function(){return this._el.seekable}},{key:"played",get:function(){return this._el.played}},{key:"buffered",get:function(){return this._el.buffered}},{key:"muted",set:function(e){this._el.muted=e},get:function(){return this._el.muted}},{key:"defaultMuted",get:function(){return this._el.defaultMuted}},{key:"poster",set:function(e){this._el.poster=e},get:function(){return this._el.poster}},{key:"preload",set:function(e){this._el.preload=e},get:function(){return this._el.preload}},{key:"autoplay",set:function(e){this._el.autoplay=e},get:function(){return this._el.autoplay}},{key:"loop",set:function(e){this._el.loop=e},get:function(){return this._el.loop}},{key:"controls",set:function(e){this._el.controls=e},get:function(){return this._el.controls}},{key:"playbackRate",set:function(e){this._el.playbackRate=e},get:function(){return this._el.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this._el.defaultPlaybackRate=e},get:function(){return this._el.defaultPlaybackRate}},{key:"ended",get:function(){return this._el.ended}},{key:"error",get:function(){return this._el.error}},{key:"networkState",get:function(){return this._el.networkState}},{key:"readyState",get:function(){return this._el.readyState}},{key:"videoHeight",get:function(){return this._el.videoHeight}},{key:"videoWidth",get:function(){return this._el.videoWidth}},{key:"playsinline",set:function(e){e?this._el.setAttribute("playsinline",""):this._el.removeAttribute("playsinline")},get:function(){return""===this._el.getAttribute("playsinline")}}],[{key:"isSupported",value:function(){try{t.TEST_VID=w.Dom.createElement("video"),t.TEST_VID.volume=.5}catch(e){return!1}return!!t.TEST_VID.canPlayType}}]),t}(l.default);E.id="html5",t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),c=r(l),d=n(8),h=n(1),p=(r(h),n(6)),f=r(p),g=n(4),y=r(g),m=n(5),v=r(m),_=n(15),b=r(_),w=n(28),E=n(3),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(E),k=function(e){function t(e,n,r){i(this,t),t._logger.debug("Creating adapter");var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._eventManager=new c.default,o._progressiveSources=r.sources.progressive,o}return o(t,e),u(t,null,[{key:"canPlayType",value:function(e){var n="string"==typeof e&&!!T.Dom.createElement("video").canPlayType(e.toLowerCase());return t._logger.debug("canPlayType result for mimeType:"+e+" is "+n.toString()),n}},{key:"createAdapter",value:function(e,t,n){return new this(e,t,n)}}]),u(t,[{key:"_setProgressiveSource",value:function(){var e=(0,w.getSuitableSourceForResolution)(this._progressiveSources,this._videoElement.offsetWidth,this._videoElement.offsetHeight);e&&(this._sourceObj=e)}},{key:"_isProgressivePlayback",value:function(){return!!this._sourceObj&&"video/mp4"===this._sourceObj.mimetype}},{key:"load",value:function(e){var n=this;return this._loadPromise||(this._loadPromise=new Promise(function(r,i){n._eventManager.listen(n._videoElement,d.HTML5_EVENTS.LOADED_DATA,function(){n._eventManager.unlisten(n._videoElement,d.HTML5_EVENTS.LOADED_DATA);var e={tracks:n._getParsedTracks()};t._logger.debug("The source has been loaded successfully"),r(e)}),n._eventManager.listen(n._videoElement,d.HTML5_EVENTS.ERROR,function(e){n._eventManager.unlisten(n._videoElement,d.HTML5_EVENTS.ERROR),t._logger.error(e),i(e)}),n._isProgressivePlayback()&&n._setProgressiveSource(),n._sourceObj&&n._sourceObj.url&&(n._videoElement.src=n._sourceObj.url,n._trigger(b.default.CustomEvents.ABR_MODE_CHANGED,{mode:n._isProgressivePlayback()?"manual":"auto"})),e&&(n._videoElement.currentTime=e)})),this._loadPromise}},{key:"destroy",value:function(){t._logger.debug("destroy"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._eventManager.destroy(),this._loadPromise=null,this._progressiveSources=[]}},{key:"_getParsedTracks",value:function(){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),n=this._getParsedTextTracks();return e.concat(t).concat(n)}},{key:"_getParsedVideoTracks",value:function(){return this._isProgressivePlayback()?this._getParsedProgressiveVideoTracks():this._getParsedAdaptiveVideoTracks()}},{key:"_getParsedProgressiveVideoTracks",value:function(){var e=this._progressiveSources,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,bandwidth:e[n].bandwidth,width:e[n].width,height:e[n].height,active:!!this._sourceObj&&e[n].id===this._sourceObj.id,index:n};t.push(new f.default(r))}return t}},{key:"_getParsedAdaptiveVideoTracks",value:function(){var e=this._videoElement.videoTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].selected,label:e[n].label,language:e[n].language,index:n};t.push(new f.default(r))}return t}},{key:"_getParsedAudioTracks",value:function(){var e=this._videoElement.audioTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={id:e[n].id,active:e[n].enabled,label:e[n].label,language:e[n].language,index:n};t.push(new y.default(r))}return t}},{key:"_getParsedTextTracks",value:function(){var e=this._videoElement.textTracks,t=[];if(e)for(var n=0;n<e.length;n++){var r={kind:e[n].kind,active:"showing"===e[n].mode,label:e[n].label,language:e[n].language,index:n};t.push(new v.default(r))}return t}},{key:"selectVideoTrack",value:function(e){this._isProgressivePlayback()?this._selectProgressiveVideoTrack(e):this.selectAdaptiveVideoTrack(e)}},{key:"_selectProgressiveVideoTrack",value:function(e){var t=this,n=this._progressiveSources;if(e instanceof f.default&&n&&n[e.index]){var r=this._videoElement.currentTime,i=this._videoElement.paused;this._sourceObj=n[e.index],this._eventManager.listen(this._videoElement,d.HTML5_EVENTS.LOADED_DATA,function(){t._eventManager.unlisten(t._videoElement,d.HTML5_EVENTS.LOADED_DATA),t._eventManager.listen(t._videoElement,d.HTML5_EVENTS.SEEKED,function(){t._eventManager.unlisten(t._videoElement,d.HTML5_EVENTS.SEEKED),t._onTrackChanged(e)}),t._videoElement.currentTime=r}),this._videoElement.src=this._sourceObj?this._sourceObj.url:"",i?this._videoElement.load():this._videoElement.play()}}},{key:"selectAdaptiveVideoTrack",value:function(e){var t=this._videoElement.videoTracks;e instanceof f.default&&t&&t[e.index]&&(this._disableVideoTracks(),t[e.index].selected=!0,this._onTrackChanged(e))}},{key:"selectAudioTrack",value:function(e){var t=this._videoElement.audioTracks;e instanceof y.default&&t&&t[e.index]&&(this._disableAudioTracks(),t[e.index].enabled=!0,this._onTrackChanged(e))}},{key:"selectTextTrack",value:function(e){var t=this._videoElement.textTracks;e instanceof v.default&&("subtitles"===e.kind||"captions"===e.kind)&&t&&t[e.index]&&(this._disableTextTracks(),t[e.index].mode="showing",this._onTrackChanged(e))}},{key:"hideTextTrack",value:function(){this._disableTextTracks()}},{key:"enableAdaptiveBitrate",value:function(){t._logger.warn("Enabling adaptive bitrate is not supported for native playback")}},{key:"isAdaptiveBitrateEnabled",value:function(){return!this._isProgressivePlayback()}},{key:"_disableVideoTracks",value:function(){var e=this._videoElement.videoTracks;if(e)for(var t=0;t<e.length;t++)e[t].selected=!1}},{key:"_disableAudioTracks",value:function(){var e=this._videoElement.audioTracks;if(e)for(var t=0;t<e.length;t++)e[t].enabled=!1}},{key:"_disableTextTracks",value:function(){var e=this._videoElement.textTracks;if(e)for(var t=0;t<e.length;t++)e[t].mode="disabled"}},{key:"src",get:function(){return this._videoElement.src}}]),t}(b.default);k.id="NativeAdapter",k._logger=b.default.getLogger(k.id),t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),s=r(o),u=n(10),l=(r(u),n(0)),c=r(l),d=function(){function e(t){i(this,e),this._actions=t,this._middlewares=new s.default,this._logger=c.default.getLogger("Middleware")}return a(e,[{key:"use",value:function(e){for(var t in this._actions){var n=this._actions[t];"function"==typeof e[n]&&(this._logger.debug("Register <"+e.id+"> for action "+n),this._middlewares.push(n,e[n].bind(e)))}}},{key:"run",value:function(e,t){var n=this;this._logger.debug("Start middleware chain for action "+e);var r=this._middlewares.get(e);this._executeMiddleware(r,function(){n._logger.debug("Finish middleware chain for action "+e),t()})}},{key:"_executeMiddleware",value:function(e,t){e.reduceRight(function(e,t){return function(n){t(e)}},t)()}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(22),s=r(o),u=n(10),l=(r(u),function(){function e(){i(this,e),this._middleware=new s.default(e.Actions)}return a(e,[{key:"use",value:function(e){this._middleware.use(e)}},{key:"play",value:function(t){this._middleware.run(e.Actions.PLAY,t)}},{key:"pause",value:function(t){this._middleware.run(e.Actions.PAUSE,t)}}]),e}());l.Actions={PLAY:"play",PAUSE:"pause"},t.default=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return new s.default(e,t||{})}Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYER_NAME=t.VERSION=t.Utils=t.TextTrack=t.AudioTrack=t.VideoTrack=t.Track=t.BaseMiddleware=t.BasePlugin=t.registerPlugin=t.BaseMediaSourceAdapter=t.registerMediaSourceAdapter=void 0,t.loadPlayer=a;var o=n(9),s=i(o),u=n(0),l=i(u),c=n(19),d=r(c),h=n(15),p=i(h),f=n(16),g=n(17),y=n(10),m=i(y),v=n(11),_=i(v),b=n(1),w=i(b),E=n(6),T=i(E),k=n(4),A=i(k),P=n(5),S=i(P),M=n(3),O=r(M),R=d.version;l.default.getLogger().log("%c Playkit "+R,"color: yellow; font-size: large"),l.default.getLogger().log("%c For more details see https://github.com/kaltura/playkit-js","color: yellow;"),t.registerMediaSourceAdapter=f.registerMediaSourceAdapter,t.BaseMediaSourceAdapter=p.default,t.registerPlugin=g.registerPlugin,t.BasePlugin=_.default,t.BaseMiddleware=m.default,t.Track=w.default,t.VideoTrack=T.default,t.AudioTrack=A.default,t.TextTrack=S.default,t.Utils=O,t.VERSION=R,t.PLAYER_NAME="kaltura-playkit-js",t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),u=(r(s),n(7)),l=r(u),c=n(26),d=r(c),h=n(18),p=r(h),f=n(8),g=n(2),y=r(g),m=n(0),v=r(m),_=function(){function e(t){var n,r,o,s,u,c,h=this;a(this,e),this._transitions=(c={},i(c,p.default.IDLE,(n={},i(n,f.HTML5_EVENTS.LOAD_START,function(){h._updateState(p.default.LOADING),h._dispatchEvent()}),i(n,f.HTML5_EVENTS.PLAY,function(){h._updateState(p.default.BUFFERING),h._dispatchEvent()}),n)),i(c,p.default.LOADING,(r={},i(r,f.HTML5_EVENTS.LOADED_METADATA,function(){h._player.config.playback.autoplay?h._updateState(p.default.PLAYING):h._updateState(p.default.PAUSED),h._dispatchEvent()}),i(r,f.HTML5_EVENTS.ERROR,function(){h._updateState(p.default.IDLE),h._dispatchEvent()}),r)),i(c,p.default.PAUSED,(o={},i(o,f.HTML5_EVENTS.PLAY,function(){h._updateState(p.default.PLAYING),h._dispatchEvent()}),i(o,f.HTML5_EVENTS.PLAYING,function(){h._updateState(p.default.PLAYING),h._dispatchEvent()}),i(o,f.HTML5_EVENTS.ENDED,function(){h._updateState(p.default.IDLE),h._dispatchEvent()}),o)),i(c,p.default.PLAYING,(s={},i(s,f.HTML5_EVENTS.PAUSE,function(){h._updateState(p.default.PAUSED),h._dispatchEvent()}),i(s,f.HTML5_EVENTS.WAITING,function(){h._updateState(p.default.BUFFERING),h._dispatchEvent()}),i(s,f.HTML5_EVENTS.ENDED,function(){h._updateState(p.default.IDLE),h._dispatchEvent()}),i(s,f.HTML5_EVENTS.ERROR,function(){h._updateState(p.default.IDLE),h._dispatchEvent()}),s)),i(c,p.default.BUFFERING,(u={},i(u,f.HTML5_EVENTS.PLAYING,function(){h._updateState(p.default.PLAYING),h._dispatchEvent()}),i(u,f.HTML5_EVENTS.PAUSE,function(){h._updateState(p.default.PAUSED),h._dispatchEvent()}),u)),c),this._player=t,this._logger=v.default.getLogger("StateManager"),this._eventManager=new l.default,this._history=[],this._prevState=null,this._curState=new d.default(p.default.IDLE),this._attachListeners()}return o(e,[{key:"_attachListeners",value:function(){this._eventManager.listen(this._player,f.HTML5_EVENTS.ERROR,this._doTransition.bind(this)),this._eventManager.listen(this._player,f.HTML5_EVENTS.ENDED,this._doTransition.bind(this)),this._eventManager.listen(this._player,f.HTML5_EVENTS.PLAY,this._doTransition.bind(this)),this._eventManager.listen(this._player,f.HTML5_EVENTS.LOAD_START,this._doTransition.bind(this)),this._eventManager.listen(this._player,f.HTML5_EVENTS.PLAYING,this._doTransition.bind(this)),this._eventManager.listen(this._player,f.HTML5_EVENTS.LOADED_METADATA,this._doTransition.bind(this)),this._eventManager.listen(this._player,f.HTML5_EVENTS.PAUSE,this._doTransition.bind(this)),this._eventManager.listen(this._player,f.HTML5_EVENTS.WAITING,this._doTransition.bind(this))}},{key:"_doTransition",value:function(e){this._logger.debug("Do transition request",e);var t=this._transitions[this._curState.type];"function"==typeof t[e.type]&&t[e.type]()}},{key:"_updateState",value:function(e){this._curState.type!==e&&(this._curState.duration=Date.now()/1e3,this._history.push(this._curState),this._prevState=this._curState,this._curState=new d.default(e),this._logger.debug("Switch player state: from "+this._prevState.type+" to "+this._curState.type))}},{key:"_dispatchEvent",value:function(){var e=new y.default(f.CUSTOM_EVENTS.PLAYER_STATE_CHANGED,{oldState:this._prevState,newState:this._curState});this._player.dispatchEvent(e)}},{key:"destroy",value:function(){this._history=[],this._eventManager.destroy()}},{key:"currentState",get:function(){return this._curState}},{key:"previousState",get:function(){return this._prevState}},{key:"history",get:function(){return this._history}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.type=t,this._duration=0,this._timestamp=Date.now()/1e3}return i(e,[{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e-this._timestamp}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={VIDEO:"video",AUDIO:"audio",TEXT:"text"};t.default=r},function(e,t,n){"use strict";function r(e,t,n){var r=null;if(n&&e){var i=[],a=1/0,o=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value,h=Math.abs(d.width-t);h<a?(a=h,i=[d]):h===a&&i.push(d)}}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}var p=t/n,f=i,g=1/0,y=!0,m=!1,v=void 0;try{for(var _,b=i[Symbol.iterator]();!(y=(_=b.next()).done);y=!0){var w=_.value;if(w.height){var E=Math.abs(w.width/w.height-p);E<g?(g=E,f=[w]):E===g&&f.push(w)}}}catch(e){m=!0,v=e}finally{try{!y&&b.return&&b.return()}finally{if(m)throw v}}var T=0,k=!0,A=!1,P=void 0;try{for(var S,M=f[Symbol.iterator]();!(k=(S=M.next()).done);k=!0){var O=S.value;(O.bandwidth>T||!O.bandwidth)&&(T=O.bandwidth||T,r=O)}}catch(e){A=!0,P=e}finally{try{!k&&M.return&&M.return()}finally{if(A)throw P}}}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.getSuitableSourceForResolution=r},function(e,t,n){t=e.exports=n(30)(void 0),t.push([e.i,'.playkit-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  color: #fff;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n*[class^="playkit-engine-"] {\n  width: 100%;\n  height: 100%;\n}\n',""])},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=r(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([a]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.3.0";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},d=function(e,t){return{value:e,name:t}};o.DEBUG=d(1,"DEBUG"),o.INFO=d(2,"INFO"),o.TIME=d(3,"TIME"),o.WARN=d(4,"WARN"),o.ERROR=d(8,"ERROR"),o.OFF=d(99,"OFF");var h=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};h.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var p=new h({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(p,p.enabledFor),e.debug=l(p,p.debug),e.time=l(p,p.time),e.timeEnd=l(p,p.timeEnd),e.info=l(p,p.info),e.warn=l(p,p.warn),e.error=l(p,p.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){p.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.get=function(e){return u[e]||(u[e]=new h(c({name:e},p.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info&&(s=console.info),e.formatter(r,i),n(s,r))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},r=o,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i)}()},function(e,t,n){var r=n(29);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(33)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=f[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(c(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(c(r.parts[a],t));f[r.id]={id:r.id,refs:1,parts:o}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],u=a[2],l=a[3],c={css:s,media:u,sourceMap:l};r[o]?r[o].parts.push(c):n.push(r[o]={id:o,parts:[c]})}return n}function a(e,t){var n=y(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=_[_.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=v++;n=m||(m=s(t)),r=d.bind(null,n,l,!1),i=d.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=p.bind(null,n,t),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=h.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function d(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function h(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=b(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var f={},g=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),y=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),m=null,v=0,_=[],b=n(34);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=f[s.id];u.refs--,a.push(u)}if(e){r(i(e,t),t)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete f[u.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(e,t,n){var r;!function(i,a){"use strict";var o="model",s="name",u="type",l="vendor",c="version",d="mobile",h="tablet",p={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},f={rgx:function(e,t){for(var n,r,i,a,o,s,u=0;u<t.length&&!o;){var l=t[u],c=t[u+1];for(n=r=0;n<l.length&&!o;)if(o=l[n++].exec(e))for(i=0;i<c.length;i++)s=o[++r],a=c[i],"object"==typeof a&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(p.has(t[n][r],e))return"?"===n?void 0:n}else if(p.has(t[n],e))return"?"===n?void 0:n;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[s,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[s,c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i,/(ucbrowser)\/([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,f.str,g.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,l,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[l,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,o,[u,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[l,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,f.str,g.device.amazon.model],[l,"Amazon"],[u,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,l,[u,d]],[/\((ip[honed|\s\w*]+);/i],[o,[l,"Apple"],[u,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,o,[u,d]],[/\(bb10;\s(\w+)/i],[o,[l,"BlackBerry"],[u,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[l,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[o,"Xperia Tablet"],[u,h]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[l,"Sony"],[o,"Xperia Phone"],[u,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,o,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,f.str,g.device.sprint.vendor],[o,f.str,g.device.sprint.model],[u,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,o,[u,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[o,/_/g," "],[u,d]],[/(nexus\s9)/i],[o,[l,"HTC"],[u,h]],[/(nexus\s6p)/i],[o,[l,"Huawei"],[u,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,o,[u,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[l,"Microsoft"],[u,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[l,"Motorola"],[u,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[l,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,p.trim],[o,p.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[l,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[l,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],o,[u,h]],[/smart-tv.+(samsung)/i],[l,[u,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],o,[u,d]],[/sie-(\w+)*/i],[o,[l,"Siemens"],[u,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],o,[u,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[l,"Acer"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],o,[u,h]],[/(lg) netcast\.tv/i],[l,o,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[l,"LG"],[u,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[l,"Lenovo"],[u,h]],[/linux;.+((jolla));/i],[l,o,[u,d]],[/((pebble))app\/[\d\.]+\s/i],[l,o,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,o,[u,d]],[/crkey/i],[[o,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[o,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[o,[l,"Google"],[u,h]],[/android.+;\s(pixel xl|pixel)\s/i],[o,[l,"Google"],[u,d]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[l,"Xiaomi"],[u,d]],[/android.+a000(1)\s+build/i],[o,[l,"OnePlus"],[u,d]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,p.lowerize],l,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]+).*(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,f.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,f.str,g.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[s,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,c]]},m=function(e,t){this[s]=e,this[c]=t},v=function(e){this.architecture=e},_=function(e,t,n){this[l]=e,this[o]=t,this[u]=n},b=m,w=m,E=function(e,t){if(!(this instanceof E))return new E(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?p.extend(y,t):y,a=new m,o=new v,s=new _,u=new b,l=new w;return this.getBrowser=function(){return f.rgx.call(a,n,r.browser),a.major=p.major(a.version),a},this.getCPU=function(){return f.rgx.call(o,n,r.cpu),o},this.getDevice=function(){return f.rgx.call(s,n,r.device),s},this.getEngine=function(){return f.rgx.call(u,n,r.engine),u},this.getOS=function(){return f.rgx.call(l,n,r.os),l},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,a=new m,o=new v,s=new _,u=new b,l=new w,this},this};E.VERSION="0.7.13",E.BROWSER={NAME:s,MAJOR:"major",VERSION:c},E.CPU={ARCHITECTURE:"architecture"},E.DEVICE={MODEL:o,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},E.ENGINE={NAME:s,VERSION:c},E.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=E),t.UAParser=E):n(36)?void 0!==(r=function(){return E}.call(t,n,t,e))&&(e.exports=r):i.UAParser=E;var T=i.jQuery||i.Zepto;if(void 0!==T){var k=new E;T.ua=k.getResult(),T.ua.get=function(){return k.getUA()},T.ua.set=function(e){k.setUA(e);var t=k.getResult();for(var n in t)T.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports={playback:{playsinline:!1,preload:"none",autoplay:!1,muted:!1,options:{html5:{hls:{},dash:{}}},streamPriority:[{engine:"html5",format:"hls"},{engine:"html5",format:"dash"},{engine:"html5",format:"progressive"}]}}}])})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e,n,a){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a));return o._addPlayerMetadata(),o._youbora=new l.default(o.player,o.config),o._addBindings(),o._setup(),o}return a(t,e),o(t,null,[{key:"isValid",value:function(){return!0}}]),o(t,[{key:"_addPlayerMetadata",value:function(){this.updateConfig({properties:{kalturaInfo:{entryId:this.player.config.id,sessionId:this.player.config.session?this.player.config.session.id:"",uiConfId:this.player.config.session?this.player.config.session.uiConfID:""}}})}},{key:"_addBindings",value:function(){l.default.bindLogger(this.logger)}},{key:"_setup",value:function(){this._youbora.registerListeners()}},{key:"destroy",value:function(){this._youbora&&this._youbora.endedHandler()}}]),t}(s.BasePlugin);c.defaultConfig={haltOnError:!1},t.default=c,(0,s.registerPlugin)("youbora",c)},function(e,t,n){"use strict";var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(0),o=n(4),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o);i.default.plugins.KalturaV3=function(e,t){try{this.pluginName=a.PLAYER_NAME,this.pluginVersion=i.default.version+"-"+s.version+"-"+a.PLAYER_NAME,this.startMonitoring(e,t)}catch(e){i.default.error(e)}},/**
 * @license
 * Youbora Plugin JS Kaltura player
 * Copyright NicePopleAtWork & Kaltura
 * @author Jordi Aguilar & Dan Ziv
 */
i.default.plugins.KalturaV3.prototype=new i.default.plugins.Generic,i.default.plugins.KalturaV3.bindLogger=function(e){i.default.error=e.error.bind(e),i.default.notice=e.info.bind(e),i.default.noticeRequest=e.info.bind(e),i.default.warn=e.warn.bind(e),i.default.debug=e.debug.bind(e),i.default.verbose=function(){}},i.default.plugins.KalturaV3.prototype.getPlayhead=function(){return this.player.currentTime},i.default.plugins.KalturaV3.prototype.getMediaDuration=function(){return this.player.duration},i.default.plugins.KalturaV3.prototype.getResource=function(){return this.player.src},i.default.plugins.KalturaV3.prototype.getPlayerVersion=function(){return a.PLAYER_NAME+"-"+a.VERSION},i.default.plugins.KalturaV3.prototype.getBitrate=function(){var e=this.player.getActiveTracks().video;return e&&e.bandwidth?e.bandwidth:-1},i.default.plugins.KalturaV3.prototype.getTitle=function(){return this.player.config.name},i.default.plugins.KalturaV3.prototype.getRendition=function(){var e=this.player.getActiveTracks().video;if(e)return i.default.utils.buildRenditionString(e.width,e.height,e.bandwidth)},i.default.plugins.KalturaV3.prototype.getIsLive=function(){return"Live"===this.player.config.type},i.default.plugins.KalturaV3.prototype.registerListeners=function(){var e=this,t=this.player.Event,n=this.player.State;this.player.addEventListener(t.PLAY,function(){e.playHandler()}),this.player.addEventListener(t.ENDED,function(){e.endedHandler()}),this.player.addEventListener(t.PLAYING,function(){e.playingHandler()}),this.player.addEventListener(t.PAUSE,function(){e.pauseHandler()}),this.player.addEventListener(t.ERROR,function(){e.errorHandler("PLAY_FAILURE")}),this.player.addEventListener(t.SEEKING,function(){e.seekingHandler()}),this.player.addEventListener(t.SEEKED,function(){e.seekedHandler()}),this.player.addEventListener(t.PLAYER_STATE_CHANGED,function(t){var r=t.payload.newState.type,i=t.payload.oldState.type;r===n.BUFFERING&&e.bufferingHandler(),i===n.BUFFERING&&e.bufferedHandler()})},e.exports=i.default.plugins.KalturaV3},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=i||{version:"5.4.6",plugins:{},adnalyzers:{},utils:{},managers:{},comm:{},data:{}};i.comm.Communication=function(e,t){try{this.host=e,this.httpSecure=t,this.pingTime=5,this.prefix="U",this.code="",this.view=-1,this.preloaders=[],this._requests={},this.addPreloader("FastData")}catch(e){i.error(e)}},i.comm.Communication.prototype.extraOperationsCallback=null,i.comm.Communication.prototype.getViewCode=function(){return this.code?this.prefix+this.code+"_"+this.view:"nocode"},i.comm.Communication.prototype.nextView=function(e){return this.view++,this.prefix=!0===e?"L":!1===e?"V":"U",this.getViewCode()},i.comm.Communication.prototype.requestData=function(e,t){try{e=e||{},e.outputformat="jsonp",delete e.code;var n=this,r=new i.comm.AjaxRequest(this._parseServiceHost(this.host),"/data",e);r.load(function(){n.receiveData(r)}),r.load(t),r.send(),i.noticeRequest("Request: NQS /data "+e.system)}catch(e){i.error(e)}},i.comm.Communication.prototype.receiveData=function(e){try{var t=e.getXHR(),n=t.response||t.responseText,r=JSON.parse(n.slice(n.indexOf("(")+1,n.lastIndexOf(")"))),a=r.q.h,o=r.q.c,s=r.q.pt,u=r.q.b;a.length>0&&o.length>0&&s.length>0&&u.length>0?(this.prefix=o.slice(0,1),this.code=o.slice(1),this.host=a,this.pingTime=s,this.balancerEnabled=u,i.noticeRequest("FastData '"+o+"' is ready."),this._requests.nocode&&this._requests.nocode.length>0&&(this._requests[this.getViewCode()]=this._requests.nocode,delete this._requests.nocode),this.removePreloader("FastData")):i.error("Error: FastData response is wrong.")}catch(e){i.error(e)}},i.comm.Communication.prototype.sendRequest=function(e,t,n){try{t=t||{},delete t.code;var r=new i.comm.AjaxRequest("",e,t);r.load(n),this._registerRequest(r)}catch(e){i.error(e)}},i.comm.Communication.prototype.sendService=function(e,t,n){try{var r=new i.comm.AjaxRequest(this._parseServiceHost(e),"",t);r.load(n),this._registerRequest(r)}catch(e){i.error(e)}},i.comm.Communication.prototype.addPreloader=function(e){try{this.preloaders.push(e)}catch(e){i.error(e)}},i.comm.Communication.prototype.removePreloader=function(e){try{var t=this.preloaders.indexOf(e);if(-1!==t){if(this.preloaders.splice(t,1),0===this.preloaders.length){var n;for(var r in this._requests)for(;n=this._requests[r].shift();)n.setParam("code",r),n.host||(n.host=this._parseServiceHost(this.host)),"function"==typeof this.extraOperationsCallback&&this.extraOperationsCallback(n.params),n.send()}}else i.warn("Warning: trying to remove unexisting preloader '"+e+"'.")}catch(e){i.error(e)}},i.comm.Communication.prototype._registerRequest=function(e){try{return void 0===this._requests[this.getViewCode()]&&(this._requests[this.getViewCode()]=[]),e.setParam("timemark",(new Date).getTime()),this._requests[this.getViewCode()].push(e),this._sendRequests(),e}catch(e){i.error(e)}},i.comm.Communication.prototype._sendRequests=function(){try{if(0===this.preloaders.length){var e;for(var t in this._requests)for(;e=this._requests[t].shift();)e.setParam("code",t),e.host||(e.host=this._parseServiceHost(this.host)),e.send()}}catch(e){i.error(e)}},i.comm.Communication.prototype._parseServiceHost=function(e){try{return 0===e.indexOf("//")?e=e.slice(2):0===e.indexOf("http://")?e=e.slice(7):0===e.indexOf("https://")&&(e=e.slice(8)),e=!0===this.httpSecure?"https://"+e:0===window.location.protocol.indexOf("http")?"//"+e:"http://"+e}catch(e){return i.error(e),"http://localhost"}},i.comm.AjaxRequest=function(e,t,n,r){try{this.xhr=this.createXHR(),this.host=e,this.service=t||"",this.params=n,this.options=r||{},this.options.method=this.options.method||i.comm.AjaxRequest.options.method,this.options.maxRetries=this.options.maxRetries||i.comm.AjaxRequest.options.maxRetries,void 0===this.options.retryAfter&&(this.options.retryAfter=i.comm.AjaxRequest.options.retryAfter),this.hasError=!1,this.retries=1}catch(e){i.error(e)}},i.comm.AjaxRequest.onEverySuccess=null,i.comm.AjaxRequest.options={method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3},i.comm.AjaxRequest.prototype.getUrl=function(){try{return this.host+this.service+this.getParams()}catch(e){i.error(e)}},i.comm.AjaxRequest.prototype.getParams=function(){try{switch(r(this.params)){case"object":return"?"+this._parseParams(this.params);case"string":return this.params?"?"+this.params:"";default:return""}}catch(e){i.error(e)}},i.comm.AjaxRequest.prototype.setParam=function(e,t){try{switch(r(this.params)){case"string":this.params.length>0&&(this.params+="&"),this.params+=e+"="+t;break;case"object":default:this.params[e]=t}return this}catch(e){return i.error(e),this}},i.comm.AjaxRequest.prototype.on=function(e,t){try{"error"==e&&(this.hasError=!0),"function"==typeof t?this.xhr.addEventListener(e,t,!1):void 0!==t&&i.warn("Warning: Request '"+this.getUrl()+"' has a callback that is not a function.")}catch(e){i.error(e)}finally{return this}},i.comm.AjaxRequest.prototype.load=function(e){return this.on("load",e)},i.comm.AjaxRequest.prototype.error=function(e){return this.on("error",e)},i.comm.AjaxRequest.prototype.send=function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(!this.hasError&&this.options.retryAfter>0&&this.options.maxRetries>0){var t=this;this.error(function(){if(t.retries>t.options.maxRetries)i.error("Error: Aborting failed request. Max retries reached.");else{i.warn("Error: Request "+t.service+" failed. Retry "+t.retries+" of "+t.options.maxRetries+" in "+t.options.retryAfter+"ms.");var e=t;setTimeout(function(){e.retries+=1,e.send()},t.options.retryAfter)}})}i.debugLevel>=5&&i.verbose("XHR Req: "+this.getUrl()),"function"==typeof i.comm.AjaxRequest.onEverySuccess&&this.load(i.comm.AjaxRequest.onEverySuccess),this.xhr.send()}catch(e){i.error(e)}},i.comm.AjaxRequest.prototype.createXHR=function(){try{return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return i.error(e),{}}},i.comm.AjaxRequest.prototype.getXHR=function(){return this.xhr},i.comm.AjaxRequest.prototype._parseParams=function(e){try{if("string"==typeof e)return e;if(null!==e&&"object"==(void 0===e?"undefined":r(e))){var t="";for(var n in e)null!==e[n]&&"object"==r(e[n])?t+=encodeURIComponent(n)+"="+encodeURIComponent(JSON.stringify(e[n]))+"&":null!==e[n]&&void 0!==e[n]&&""!==e[n]&&(t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&");return t.slice(0,-1)}return""}catch(e){return i.error(e),""}},i.data.Options=function(e){try{this.setOptions(e)}catch(e){i.error(e)}},i.data.Options.prototype={enableAnalytics:!0,disabledRequests:[],parseHLS:!1,parseCDNNodeHost:!1,useCDNFromParser:!1,parseCDNNameFrom:"x-cdn-forward",haltOnError:!0,hashTitle:!0,httpSecure:void 0,enableNiceBuffer:!0,enableNiceSeek:!0,accountCode:"nicetest",service:"nqs.nice264.com",username:void 0,transactionCode:void 0,network:{ip:void 0,isp:void 0},device:{id:void 0},media:{isLive:void 0,resource:void 0,title:void 0,duration:void 0,cdn:void 0,isBalanced:0,isResumed:0},ads:{expected:!1,resource:void 0,campaign:void 0,title:void 0,position:void 0,duration:void 0},properties:{contentId:void 0,type:void 0,transaction_type:void 0,genre:void 0,language:void 0,year:void 0,cast:void 0,director:void 0,owner:void 0,parental:void 0,price:void 0,rating:void 0,audioType:void 0,audioChannels:void 0,device:void 0,quality:void 0},extraParams:{param1:void 0,param2:void 0,param3:void 0,param4:void 0,param5:void 0,param6:void 0,param7:void 0,param8:void 0,param9:void 0,param10:void 0,param11:void 0,param12:void 0,param13:void 0,param14:void 0,param15:void 0,param16:void 0,param17:void 0,param18:void 0,param19:void 0,param20:void 0},setOptions:function(e,t){try{if(t=t||this,void 0!==e)for(var n in e)"object"==r(t[n])&&null!==t[n]?this.setOptions(e[n],t[n]):t[n]=e[n]}catch(e){i.error(e)}}},i.adnalyzers.Generic=function(){},i.adnalyzers.Generic.prototype={adnalyzerVersion:"5.3.0-GENERIC",ads:void 0,plugin:void 0},i.adnalyzers.Generic.prototype.startMonitoring=function(e,t){try{i.notice("Adnalyzer "+this.adnalyzerVersion+" is ready."),this.plugin=e,this.ads=t}catch(e){return i.error(e),null}},i.adnalyzers.Generic.prototype.stopMonitoring=function(){this.ads=null,this.plugin.viewManager.timer.adPlayheadMonitor.stop()},i.adnalyzers.Generic.prototype.enableAdBufferMonitor=function(){this.plugin.infoManager.options.enableNiceBuffer&&(this.plugin.viewManager.enableAdBufferMonitor=!0)},i.adnalyzers.Generic.prototype.enableAdSeekMonitor=function(){this.plugin.infoManager.options.enableNiceSeek&&(this.plugin.viewManager.enableAdSeekMonitor=!0)},i.adnalyzers.Generic.prototype.initAdHandler=function(){try{this.plugin.viewManager.isAdStartSent||this.plugin.viewManager.isAdInitSent||this.plugin.viewManager.sendAdInit()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.playAdHandler=function(){try{this.plugin.viewManager.isAdStartSent||this.plugin.viewManager.sendAdStart()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.startJoinAdHandler=function(){try{this.plugin.viewManager.isAdStartSent||(this.plugin.viewManager.sendAdStart(),this.plugin.viewManager.isBuffering&&(this.plugin.viewManager.chrono.joinTime.startTime=this.plugin.viewManager.chrono.buffer.startTime,this.plugin.viewManager.isBuffering=!1),this.plugin.viewManager.sendAdJoin())}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.joinAdHandler=function(){try{this.plugin.viewManager.sendAdJoin()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.pauseAdHandler=function(){try{this.plugin.viewManager.sendAdPause()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.pauseToggleAdHandler=function(){try{this.plugin.viewManager.isAdPaused?this.plugin.viewManager.sendAdResume():this.plugin.viewManager.sendAdPause()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.resumeAdHandler=function(){try{this.plugin.viewManager.sendAdResume()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.endedAdHandler=function(){try{this.plugin.viewManager.sendAdStop()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.skipAdHandler=function(){try{this.plugin.viewManager.sendAdStop({skipped:!0})}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.bufferingAdHandler=function(){try{this.plugin.viewManager.sendAdBufferStart()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.bufferedAdHandler=function(){try{this.plugin.viewManager.isAdStartSent&&(this.plugin.viewManager.isAdJoinSent?this.plugin.viewManager.isAdBuffering&&this.plugin.viewManager.sendAdBufferEnd():this.plugin.viewManager.sendAdJoin())}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.errorAdHandler=function(e,t){try{void 0===e&&(e=0),t=t||e||"Unknown error",this.plugin.viewManager.sendAdError({errorCode:e,msg:t})}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.noServedAdHandler=function(e,t){try{void 0===e&&(e=0),t=t||e||"Unknown error",this.plugin.viewManager.sendAdError({errorCode:e,msg:t,errorSeverity:"AdsNotServed"}),this.plugin.viewManager.sendAdStop()}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.clickAdHandler=function(e){try{this.plugin.viewManager.sendAdClick({adUrl:e})}catch(e){i.error(e)}},i.adnalyzers.Generic.prototype.getAdResource=function(){return"unknown"},i.adnalyzers.Generic.prototype.getMediaPlayhead=function(){return null},i.adnalyzers.Generic.prototype.getAdPlayhead=function(){return 0},i.adnalyzers.Generic.prototype.getAdPosition=function(){return this.plugin.viewManager.isJoinSent?"mid":"pre"},i.adnalyzers.Generic.prototype.getAdTitle=function(){return null},i.adnalyzers.Generic.prototype.getAdDuration=function(){return 0},i.adnalyzers.Generic.prototype.getAdBitrate=function(){return-1},i.adnalyzers.Generic.prototype.getAdPlayerVersion=function(){return null},i.plugins.Generic=function(){},i.plugins.Generic.prototype={pluginName:"GENERIC",pluginVersion:"5.1.0-GENERIC",playerId:"generic",player:null,tag:null,infoManager:void 0,viewManager:void 0,adnalyzer:null},i.plugins.Generic.prototype.startMonitoring=function(e,t){try{i.notice("Plugin "+this.pluginVersion+" (with YouboraJS "+i.version+") is ready."),"string"==typeof e?(this.playerId=e,this.player=document.getElementById(e)):(this.player=e,e&&e.id&&(this.playerId=e.id)),this.tag=this.player,void 0===this.infoManager?this.infoManager=new i.managers.Info(this,t):this.infoManager.setOptions(t),this.viewManager=new i.managers.View(this.infoManager)}catch(e){return i.error(e),null}},i.plugins.Generic.prototype.stopMonitoring=function(){this.player=null,this.tag=null,this.viewManager.stopTimers()},i.plugins.Generic.prototype.enableBufferMonitor=function(){this.infoManager.options.enableNiceBuffer&&(this.viewManager.enableBufferMonitor=!0)},i.plugins.Generic.prototype.enableSeekMonitor=function(){this.infoManager.options.enableNiceSeek&&(this.viewManager.enableSeekMonitor=!0)},i.plugins.Generic.prototype.setOptions=function(e){try{this.infoManager.options.setOptions(e)}catch(e){i.error(e)}},i.plugins.Generic.prototype.getOptions=function(){try{return this.infoManager.options||{}}catch(e){return i.error(e),{}}},i.plugins.Generic.prototype.playHandler=function(){try{this.viewManager.sendStart()}catch(e){i.error(e)}},i.plugins.Generic.prototype.joinHandler=function(){try{this.viewManager.sendJoin()}catch(e){i.error(e)}},i.plugins.Generic.prototype.playingHandler=function(){try{this.viewManager.isStartSent&&(this.viewManager.isJoinSent?this.viewManager.isSeeking&&this.viewManager.isPaused?(this.viewManager.sendSeekEnd(),this.viewManager.sendResume()):this.viewManager.isSeeking?this.viewManager.sendSeekEnd():this.viewManager.isBuffering?this.viewManager.sendBufferEnd():this.viewManager.isPaused&&this.viewManager.sendResume():this.viewManager.sendJoin())}catch(e){i.error(e)}},i.plugins.Generic.prototype.pauseHandler=function(){try{this.viewManager.sendPause()}catch(e){i.error(e)}},i.plugins.Generic.prototype.pauseToggleHandler=function(){try{this.viewManager.isPaused?this.viewManager.sendResume():this.viewManager.sendPause()}catch(e){i.error(e)}},i.plugins.Generic.prototype.resumeHandler=function(){try{this.viewManager.sendResume()}catch(e){i.error(e)}},i.plugins.Generic.prototype.endedHandler=function(){try{this.viewManager.sendStop()}catch(e){i.error(e)}},i.plugins.Generic.prototype.errorHandler=function(e,t){try{void 0===e&&(e=0),t=t||e||"Unknown error",this.viewManager.sendError({errorCode:e,msg:t})}catch(e){i.error(e)}},i.plugins.Generic.prototype.seekingHandler=function(){try{this.viewManager.isBuffering?this.viewManager.convertBufferToSeek():this.viewManager.sendSeekStart()}catch(e){i.error(e)}},i.plugins.Generic.prototype.seekedHandler=function(){try{this.viewManager.sendSeekEnd()}catch(e){i.error(e)}},i.plugins.Generic.prototype.bufferingHandler=function(){try{this.viewManager.isSeeking||this.viewManager.sendBufferStart()}catch(e){i.error(e)}},i.plugins.Generic.prototype.bufferedHandler=function(){try{this.viewManager.isStartSent&&(this.viewManager.isJoinSent?this.viewManager.isSeeking?this.viewManager.sendSeekEnd():this.viewManager.isBuffering&&this.viewManager.sendBufferEnd():this.viewManager.sendJoin())}catch(e){i.error(e)}},i.plugins.Generic.prototype.ignoringAdHandler=function(){try{this.viewManager.sendIgnoreAdStart()}catch(e){i.error(e)}},i.plugins.Generic.prototype.ignoredAdHandler=function(){try{this.viewManager.sendIgnoreAdEnd()}catch(e){i.error(e)}},i.plugins.Generic.prototype.getResource=function(){return"unknown"},i.plugins.Generic.prototype.getPlayhead=function(){return 0},i.plugins.Generic.prototype.getMediaDuration=function(){return 0},i.plugins.Generic.prototype.getIsLive=function(){return!1},i.plugins.Generic.prototype.getRendition=function(){return null},i.plugins.Generic.prototype.getBitrate=function(){return-1},i.plugins.Generic.prototype.getThroughput=function(){return-1},i.plugins.Generic.prototype.getPlayerVersion=function(){return null},i.plugins.Generic.prototype.getTotalBytes=function(){return null},i.plugins.Generic.prototype.getTitle=function(){return null},i.managers.Info=function(e,t){this.plugin=e,this.options=new i.data.Options(t),this.lastBitrate=0,this.lastAdBitrate=0},i.managers.Info.prototype.getDataParams=function(e){try{return e=e||{},e.system=e.hasOwnProperty("system")?e.system:this.options.accountCode,e.pluginName=e.hasOwnProperty("pluginName")?e.pluginName:this.plugin.pluginName,e.pluginVersion=e.hasOwnProperty("pluginVersion")?e.pluginVersion:this.plugin.pluginVersion,e.live=e.hasOwnProperty("live")?e.live:this.options.media.isLive,e}catch(t){return i.error(t),e}},i.managers.Info.prototype.setOptions=function(e){this.options.setOptions(e)},i.managers.Info.prototype.getOptions=function(e){return this.options},i.managers.Info.prototype.getAdPlayhead=function(){try{return this.plugin.adnalyzer?i.utils.parseNumber(this.plugin.adnalyzer.getAdPlayhead(),0):0}catch(e){return i.warn(e),0}},i.managers.Info.prototype.getAdBitrate=function(){try{if(this.plugin.adnalyzer){var e=Math.round(this.plugin.adnalyzer.getAdBitrate());if(-1==e&&this.plugin.adnalyzer.tag&&void 0!==this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount){var t=this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount;this.lastAdBitrate&&(t=Math.round((this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount-this.lastAdBitrate)/5*8)),this.lastAdBitrate=this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount,e=t}return i.utils.parseNumber(e,-1)}return-1}catch(e){return i.warn(e),-1}},i.managers.Info.prototype.getAdResource=function(){try{return void 0!==this.options.ads.resource?this.options.ads.resource:this.plugin.adnalyzer.getAdResource()}catch(e){return i.warn(e),""}},i.managers.Info.prototype.getAdPosition=function(){try{return void 0!==this.options.ads.position?this.options.ads.position:this.plugin.adnalyzer.getAdPosition()}catch(e){return i.warn(e),"mid"}},i.managers.Info.prototype.getAdTitle=function(){try{return void 0!==this.options.ads.title?this.options.ads.title:this.plugin.adnalyzer.getAdTitle()}catch(e){return i.warn(e),""}},i.managers.Info.prototype.getAdDuration=function(){try{var e=0;return e=void 0!==this.options.ads.duration?this.options.ads.duration:Math.round(this.plugin.adnalyzer.getAdDuration()),i.utils.parseNumber(e,0)}catch(e){return i.warn(e),0}},i.managers.Info.prototype.getAdPlayerVersion=function(){try{return this.plugin.adnalyzer.getAdPlayerVersion()}catch(e){return i.warn(e),null}},i.managers.Info.prototype.getAdStartParams=function(e,t){try{return e=e||{},e.position=void 0!==e.position?e.position:this.getAdPosition(),e.resource=void 0!==e.resource?e.resource:this.getAdResource(),e.campaign=void 0!==e.campaign?e.campaign:this.options.ads.campaign,e.title=void 0!==e.title?e.title:this.getAdTitle(),e.adDuration=void 0!==e.adDuration?e.adDuration:this.getAdDuration(),e.playhead=void 0!==e.playhead?e.playhead:Math.round(this.getPlayhead()),e.adnalyzerVersion=void 0!==e.adnalyzerVersion?e.adnalyzerVersion:this.plugin.adnalyzer.adnalyzerVersion,e.adPlayerVersion=void 0!==e.adPlayerVersion?e.adPlayerVersion:this.getAdPlayerVersion(),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getAdJoinParams=function(e,t){try{return e=e||{},e.adPlayhead=void 0!==e.adPlayhead?e.adPlayhead:this.getAdPlayhead(),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getAdStopParams=function(e,t){try{return e=e||{},e.adPlayhead=void 0!==e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e.adBitrate=void 0!==e.adBitrate?e.adBitrate:this.getAdBitrate(),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getAdPauseParams=function(e,t){return e||{}},i.managers.Info.prototype.getAdResumeParams=function(e,t){return e||{}},i.managers.Info.prototype.getAdBufferEndParams=function(e,t){try{return e=e||{},e.adPlayhead=void 0!==e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getAdPingParams=function(e,t){try{return e=e||{},e.adBitrate=void 0!==e.adBitrate?e.adBitrate:this.getAdBitrate(),e.adPlayhead=void 0!==e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getAdErrorParams=function(e,t){try{return e=e||{},e.errorCode=e.hasOwnProperty("errorCode")?e.errorCode:"9000",e.msg=e.hasOwnProperty("msg")?e.msg:"Unknown Error",e.adPlayhead=void 0!==e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e.player=e.hasOwnProperty("player")?e.player:this.plugin.pluginName,e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getAdClickParams=function(e,t){try{return e=e||{},e.adPlayhead=void 0!==e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getResource=function(){try{return this.plugin.viewManager.resourceParser&&this.plugin.viewManager.resourceParser.realResource?this.plugin.viewManager.resourceParser.realResource:void 0!==this.options.media.resource?this.options.media.resource:this.plugin.getResource()}catch(e){return i.warn(e),"unknown"}},i.managers.Info.prototype.getCDN=function(){try{return this.plugin.viewManager.resourceParser&&this.plugin.viewManager.resourceParser.cdn&&this.options.useCDNFromParser?this.plugin.viewManager.resourceParser.cdn:void 0!==this.options.media.cdn?this.options.media.cdn:null}catch(e){return i.warn(e),null}},i.managers.Info.prototype.getMediaDuration=function(){try{var e=0;return e=void 0!==this.options.media.duration?this.options.media.duration:this.plugin.getMediaDuration(),Math.round(i.utils.parseNumber(e,0))}catch(e){return i.warn(e),0}},i.managers.Info.prototype.getIsLive=function(){try{return void 0!==this.options.media.isLive?this.options.media.isLive:this.plugin.getIsLive()}catch(e){return i.warn(e),!1}},i.managers.Info.prototype.getPlayerVersion=function(){try{return this.plugin.getPlayerVersion()}catch(e){return i.warn(e),""}},i.managers.Info.prototype.getTitle=function(){try{return void 0!==this.options.media.title?this.options.media.title:this.plugin.getTitle()}catch(e){return i.warn(e),""}},i.managers.Info.prototype.getRendition=function(){try{return void 0!==this.options.media.rendition?this.options.media.rendition:this.plugin.getRendition()}catch(e){return i.warn(e),""}},i.managers.Info.prototype.getBitrate=function(){try{var e=Math.round(this.plugin.getBitrate());if(-1==e&&this.plugin.tag&&void 0!==this.plugin.tag.webkitVideoDecodedByteCount){var t=this.plugin.tag.webkitVideoDecodedByteCount;this.lastBitrate&&(t=Math.round((this.plugin.tag.webkitVideoDecodedByteCount-this.lastBitrate)/5*8)),this.lastBitrate=this.plugin.tag.webkitVideoDecodedByteCount,e=0!=t?t:-1}return i.utils.parseNumber(e,-1)}catch(e){return i.warn(e),-1}},i.managers.Info.prototype.getThroughput=function(){try{return i.utils.parseNumber(Math.round(this.plugin.getThroughput()),-1)}catch(e){return i.warn(e),-1}},i.managers.Info.prototype.getTotalBytes=function(){try{return i.utils.parseNumber(this.plugin.getTotalBytes(),null)}catch(e){return i.warn(e),null}},i.managers.Info.prototype.getPlayhead=function(){try{var e=this.plugin.getPlayhead();return this.plugin.adnalyzer&&null!==this.plugin.adnalyzer.getMediaPlayhead()&&(e=this.plugin.adnalyzer.getMediaPlayhead()),i.utils.parseNumber(e,0)}catch(e){return i.warn(e),0}},i.managers.Info.prototype.getStartParams=function(e){try{if(e=e||{},e.system=e.hasOwnProperty("system")?e.system:this.options.accountCode,e.player=e.hasOwnProperty("player")?e.player:this.plugin.pluginName,e.user=e.hasOwnProperty("user")?e.user:this.options.username,e.transcode=e.hasOwnProperty("transcode")?e.transcode:this.options.transactionCode,e.hashTitle=e.hasOwnProperty("hashTitle")?e.hashTitle:this.options.hashTitle,!e.hasOwnProperty("referer")){e.referer="";try{e.referer=top.window.location.href}catch(t){e.referer=window.location.href}}return e.deviceId=e.hasOwnProperty("deviceId")?e.deviceid:this.options.device.id,e.pluginVersion=e.hasOwnProperty("pluginVersion")?e.pluginVersion:this.plugin.pluginVersion,e.playerVersion=e.hasOwnProperty("playerVersion")?e.playerVersion:this.getPlayerVersion(),e.resource=e.hasOwnProperty("resource")?e.resource:this.getResource(),e.duration=e.hasOwnProperty("duration")?e.duration:this.getMediaDuration(),e.live=e.hasOwnProperty("live")?e.live:this.getIsLive(),e.rendition=e.hasOwnProperty("rendition")?e.rendition:this.getRendition(),e.title=e.hasOwnProperty("title")?e.title:this.getTitle(),e.properties=e.hasOwnProperty("properties")?e.properties:this.options.properties,e.cdn=e.hasOwnProperty("cdn")?e.cdn:this.getCDN(),e.isp=e.hasOwnProperty("isp")?e.isp:this.options.network.isp,e.ip=e.hasOwnProperty("ip")?e.ip:this.options.network.ip,e.param1=e.hasOwnProperty("param1")?e.param1:this.options.extraParams.param1,e.param2=e.hasOwnProperty("param2")?e.param2:this.options.extraParams.param2,e.param3=e.hasOwnProperty("param3")?e.param3:this.options.extraParams.param3,e.param4=e.hasOwnProperty("param4")?e.param4:this.options.extraParams.param4,e.param5=e.hasOwnProperty("param5")?e.param5:this.options.extraParams.param5,e.param6=e.hasOwnProperty("param6")?e.param6:this.options.extraParams.param6,e.param7=e.hasOwnProperty("param7")?e.param7:this.options.extraParams.param7,e.param8=e.hasOwnProperty("param8")?e.param8:this.options.extraParams.param8,e.param9=e.hasOwnProperty("param9")?e.param9:this.options.extraParams.param9,e.param10=e.hasOwnProperty("param10")?e.param10:this.options.extraParams.param10,e.param11=e.hasOwnProperty("param11")?e.param11:this.options.extraParams.param11,e.param12=e.hasOwnProperty("param12")?e.param12:this.options.extraParams.param12,e.param13=e.hasOwnProperty("param13")?e.param13:this.options.extraParams.param13,e.param14=e.hasOwnProperty("param14")?e.param14:this.options.extraParams.param14,e.param15=e.hasOwnProperty("param15")?e.param15:this.options.extraParams.param15,e.param16=e.hasOwnProperty("param16")?e.param16:this.options.extraParams.param16,e.param17=e.hasOwnProperty("param17")?e.param17:this.options.extraParams.param17,e.param18=e.hasOwnProperty("param18")?e.param18:this.options.extraParams.param18,e.param19=e.hasOwnProperty("param19")?e.param19:this.options.extraParams.param19,e.param20=e.hasOwnProperty("param20")?e.param20:this.options.extraParams.param20,e.totalBytes=e.hasOwnProperty("totalBytes")?e.totalBytes:this.getTotalBytes(),e.adsExpected=e.hasOwnProperty("adsExpected")?e.adsExpected:this.options.ads.expected,1==this.options.isResumed&&(e.isResumed=1),1==this.options.isBalanced&&(e.isBalanced=1),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getJoinParams=function(e){try{return e=e||{},e.eventTime=e.hasOwnProperty("eventTime")?e.eventTime:this.getPlayhead(),e.mediaDuration=e.hasOwnProperty("mediaDuration")?e.mediaDuration:this.getMediaDuration(),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getStopParams=function(e){return e||{}},i.managers.Info.prototype.getPauseParams=function(e){return e||{}},i.managers.Info.prototype.getResumeParams=function(e){return e||{}},i.managers.Info.prototype.getBufferEndParams=function(e){try{return e=e||{},e.time=e.hasOwnProperty("time")?e.time:this.getPlayhead(),e}catch(t){return i.error(t),e}},i.managers.Info.prototype.getErrorParams=function(e){try{return e=e||{},e.errorCode=e.hasOwnProperty("errorCode")?e.errorCode:"9000",e.msg=e.hasOwnProperty("msg")?e.msg:"Unknown Error",e=this.getStartParams(e)}catch(t){return i.error(t),e}},i.managers.Info.prototype.getSeekEndParams=function(e){return this.getBufferEndParams(e)},i.managers.Info.prototype.getPingParams=function(e,t){try{return e=e||{},e.time=void 0!==e.time?e.time:this.getPlayhead(),e.bitrate=void 0!==e.bitrate?e.bitrate:this.getBitrate(),e.throughput=void 0!==e.throughput?e.throughput:this.getThroughput(),e.totalBytes=void 0!==e.totalBytes?e.totalBytes:this.getTotalBytes(),e}catch(t){return i.error(t),e}},i.managers.View=function(e){this.infoManager=e,this.isStartSent=!1,this.isJoinSent=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isErrorSent=!1,this.isShowingAds=!1,this.isAdStartSent=!1,this.isAdJoinSent=!1,this.isAdPaused=!1,this.isAdBuffering=!1,this.chrono={joinTime:new i.utils.Chrono,seek:new i.utils.Chrono,pause:new i.utils.Chrono,buffer:new i.utils.Chrono,adIgnore:new i.utils.Chrono,adTotal:new i.utils.Chrono,adJoinTime:new i.utils.Chrono,adPause:new i.utils.Chrono,adBuffer:new i.utils.Chrono},this.adCounter={pre:0,mid:0,post:0,unknown:0};var t=this;this.timer={pinger:new i.utils.Timer(function(e){t.sendPing({diffTime:e})}),playheadMonitor:new i.utils.Timer(function(e){t.checkPlayhead()},i.managers.View.monitoringInterval),adPlayheadMonitor:new i.utils.Timer(function(e){t.checkAdPlayhead()},i.managers.View.monitoringInterval)},this.enableBufferMonitor=!1,this.enableSeekMonitor=!1,this.enableAdBufferMonitor=!1,this.enableAdSeekMonitor=!1,this.lastDuration=0,this.lastPlayhead=0,this.lastAdPosition="",this.lastRendition="",this.lastResume=0,this.changedEntities=[],this.resourceParser=new i.utils.ResourceParser(this),this.comm=new i.comm.Communication(this.infoManager.options.service,this.infoManager.options.httpSecure),this.comm.requestData(this.infoManager.getDataParams(),function(){t.timer.pinger.interval=Math.max(1e3,1e3*t.comm.pingTime)})},i.managers.View.prototype.sendRequest=function(e,t,n){try{this.isAllowed(e)&&this.comm.sendRequest(e,t,n)}catch(e){i.error(e)}},i.managers.View.prototype.isAllowed=function(e){return this.infoManager.options.enableAnalytics&&!(e in this.infoManager.options.disabledRequests)},i.managers.View.prototype.isHalted=function(){return this.infoManager.options.haltOnError&&this.isErrorSent},i.managers.View.prototype.sendAdInit=function(e,t){try{this.isHalted()||this.isAdStartSent||this.isAdInitSent||(this.isShowingAds=!0,this.isAdInitSent=!0,this.chrono.adTotal.start(),this.chrono.adJoinTime.start(),this.sendSeekEnd(),this.sendBufferEnd(),e=this.infoManager.getAdStartParams(e),e.number=void 0!==e.number?e.number:this.getAdNumber(e.position,!0),this.lastAdPosition=e.position,this.sendRequest("/adInit",e,t),i.noticeRequest("Request: NQS /adInit "+e.position+e.number))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdStart=function(e,t){try{this.isHalted()||this.isAdStartSent||(this.isShowingAds=!0,this.isAdStartSent=!0,this.isAdInitSent||(this.chrono.adTotal.start(),this.chrono.adJoinTime.start()),this.sendSeekEnd(),this.sendBufferEnd(),e=this.infoManager.getAdStartParams(e),e.number=void 0!==e.number?e.number:this.getAdNumber(e.position,!this.isAdInitSent),this.lastAdPosition=e.position,this.sendRequest("/adStart",e,t),i.noticeRequest("Request: NQS /adStart "+e.position+e.number),this.isAdInitSent&&(this.sendAdJoin(),this.isAdInitSent=!1))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdJoin=function(e,t){try{this.isHalted()||this.isAdStartSent&&!this.isAdJoinSent&&(this.isAdJoinSent=!0,(this.enableAdBufferMonitor||this.enableAdSeekMonitor)&&(this.timer.adPlayheadMonitor.start(),this.lastPlayhead=0),e=this.infoManager.getAdJoinParams(e),e.duration=void 0!==e.duration?e.duration:this.chrono.adJoinTime.getDeltaTime(),e.position=void 0!==e.position?e.position:this.lastAdPosition,e.number=void 0!==e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adJoinTime",e,t),i.noticeRequest("Request: NQS /adJoinTime "+e.duration+"ms"))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdStop=function(e,t){try{this.isHalted()||(this.isAdStartSent||this.isAdInitSent)&&(this.isAdStartSent=!1,this.isAdJoinSent=!1,this.isAdPaused=!1,this.isAdBuffering=!1,this.isShowingAds=!1,this.isAdInitSent=!1,this.timer.adPlayheadMonitor.stop(),e=this.infoManager.getAdStopParams(e),e.totalDuration=void 0!==e.totalDuration?e.totalDuration:this.chrono.adTotal.getDeltaTime(),e.position=void 0!==e.position?e.position:this.lastAdPosition,e.number=void 0!==e.number?e.number:this.getAdNumber(e.position),e.adPlayhead||delete e.adPlayhead,this.isJoinSent||(this.chrono.joinTime.startTime+=this.chrono.adTotal.getDeltaTime(),this.chrono.joinTime.startTime=Math.min(this.chrono.joinTime.startTime,(new Date).getTime())),this.sendRequest("/adStop",e,t),i.noticeRequest("Request: NQS /adStop "+e.totalDuration+"ms"))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdPause=function(e,t){try{this.isHalted()||this.isAdJoinSent&&!this.isAdPaused&&(this.isAdPaused=!0,this.chrono.adPause.start(),e=this.infoManager.getAdPauseParams(e),e.position=void 0!==e.position?e.position:this.lastAdPosition,e.number=void 0!==e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adPause",e,t),i.noticeRequest("Request: NQS /adPause"))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdResume=function(e,t){try{this.isHalted()||this.isAdJoinSent&&this.isAdPaused&&(this.isAdPaused=!1,this.chrono.adPause.stop(),e=this.infoManager.getAdResumeParams(e),e.position=void 0!==e.position?e.position:this.lastAdPosition,e.number=void 0!==e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adResume",e,t),i.noticeRequest("Request: NQS /adResume"))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdBufferStart=function(){try{this.isHalted()||this.isAdJoinSent&&!this.isAdBuffering&&(this.isAdBuffering=!0,this.chrono.adBuffer.start(),i.noticeRequest("Method: /adBufferStart"))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdBufferEnd=function(e,t){try{this.isHalted()||this.isAdJoinSent&&this.isAdBuffering&&(this.isAdBuffering=!1,e=this.infoManager.getAdBufferEndParams(e),e.duration=void 0!==e.duration?e.duration:this.chrono.adBuffer.getDeltaTime(),e.position=void 0!==e.position?e.position:this.lastAdPosition,e.number=void 0!==e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adBufferUnderrun",e,t),i.noticeRequest("Request: NQS /adBufferUnderrun "+e.duration+"ms"))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdError=function(e,t){try{this.isHalted()||(e=this.infoManager.getAdErrorParams(e),void 0===e.position&&(this.isAdStartSent?e.position=this.lastAdPosition:e.position=this.infoManager.getAdPosition(),e.number=this.getAdNumber(e.position)),this.sendRequest("/adError",e,t),i.noticeRequest("Request: NQS /adError"))}catch(e){i.error(e)}},i.managers.View.prototype.sendAdClick=function(e,t){try{this.isHalted()||(e=this.infoManager.getAdClickParams(e),e.position=void 0!==e.position?e.position:this.lastAdPosition,e.number=void 0!==e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adClick",e,t),i.noticeRequest("Request: NQS /adClick"))}catch(e){i.error(e)}},i.managers.View.prototype.getAdNumber=function(e,t){var n=0;switch(e){case"pre":n=t?++this.adCounter.pre:this.adCounter.pre;break;case"mid":n=t?++this.adCounter.mid:this.adCounter.mid;break;case"post":n=t?++this.adCounter.post:this.adCounter.post;break;default:n=t?++this.adCounter.unknown:this.adCounter.unknown}return n>0?n:1},i.managers.View.prototype.resetAdNumbers=function(){this.adCounter={pre:0,mid:0,post:0,unknown:0}},i.managers.View.prototype.sendIgnoreAdStart=function(){try{this.isHalted()||this.isStartSent&&!this.isShowingAds&&(this.isShowingAds=!0,this.chrono.adIgnore.start(),this.sendBufferEnd(),this.sendSeekEnd(),i.noticeRequest("Method: /genericAdStart"))}catch(e){i.error(e)}},i.managers.View.prototype.sendIgnoreAdEnd=function(){try{this.isHalted()||this.isStartSent&&this.isShowingAds&&(this.isShowingAds=!1,this.chrono.adIgnore.stop(),this.isJoinSent||(this.chrono.joinTime.startTime+=this.chrono.adIgnore.getDeltaTime(),this.chrono.joinTime.startTime=Math.min(this.chrono.joinTime.startTime,(new Date).getTime())),i.noticeRequest("Method: /genericAdEnd "+this.chrono.adIgnore.getDeltaTime()+"ms"))}catch(e){i.error(e)}},i.managers.View.prototype.sendStart=function(e,t){try{this.isHalted()||this.isStartSent||((this.infoManager.options.parseCDNNodeHost||this.infoManager.options.parseHLS)&&this.resourceParser.init(),this.isStartSent=!0,this.chrono.joinTime.start(),i.noticeRequest("Sending pings every "+this.comm.pingTime+"s."),this.timer.pinger.interval=Math.max(1e3,1e3*this.comm.pingTime),this.timer.pinger.start(),e=this.infoManager.getStartParams(e),e.pingTime=void 0!==e.pingTime?e.pingTime:this.comm.pingTime,this.infoManager.options.parseCDNNodeHost&&(e.nodeHost=void 0!==e.nodeHost?e.nodeHost:void 0!==this.resourceParser.nodeHost?this.resourceParser.nodeHost:"",e.nodeType=void 0!==e.nodeType?e.nodeType:void 0!==this.resourceParser.nodeType?this.resourceParser.nodeType:""),this.comm.nextView(e.live),this.sendRequest("/start",e,t),i.noticeRequest("Request: NQS /start "+e.resource),this.lastDuration=e.duration,this.lastRendition=e.rendition)}catch(e){i.error(e)}},i.managers.View.prototype.sendJoin=function(e,t){try{this.isHalted()||!this.isStartSent||this.isJoinSent||this.isShowingAds||(this.isJoinSent=!0,(this.enableBufferMonitor||this.enableSeekMonitor)&&(this.timer.playheadMonitor.start(),this.lastPlayhead=0),e=this.infoManager.getJoinParams(e),e.time=void 0!==e.time?e.time:this.chrono.joinTime.getDeltaTime(),e.mediaDuration===this.lastDuration&&delete e.mediaDuration,this.sendRequest("/joinTime",e,t),i.noticeRequest("Request: NQS /joinTime "+e.time+"ms"))}catch(e){i.error(e)}},i.managers.View.prototype.sendStop=function(e,t){try{this.isHalted()||this.isStartSent&&(this.isStartSent=!1,this.isPaused=!1,this.isJoinSent=!1,this.isSeeking=!1,this.isBuffering=!1,this.isErrorSent=!1,this.resourceParser.clear(),this.resetAdNumbers(),this.stopTimers(),e=this.infoManager.getStopParams(e),e.diffTime=void 0!==e.diffTime?e.diffTime:this.timer.pinger.chrono.getDeltaTime(),this.sendRequest("/stop",e,t),i.noticeRequest("Request: NQS /stop"))}catch(e){i.error(e)}},i.managers.View.prototype.sendPause=function(e,t){try{this.isHalted()||this.isJoinSent&&!this.isPaused&&(this.isPaused=!0,this.chrono.pause.start(),e=this.infoManager.getPauseParams(e),this.sendRequest("/pause",e,t),i.noticeRequest("Request: NQS /pause"))}catch(e){i.error(e)}},i.managers.View.prototype.sendResume=function(e,t){try{this.isHalted()||this.isJoinSent&&this.isPaused&&(this.isPaused=!1,this.chrono.pause.stop(),this.lastResume=(new Date).getTime(),e=this.infoManager.getResumeParams(e),this.sendRequest("/resume",e,t),i.noticeRequest("Request: NQS /resume"))}catch(e){i.error(e)}},i.managers.View.prototype.sendBufferStart=function(){try{this.isHalted()||this.isJoinSent&&!this.isBuffering&&(this.isBuffering=!0,this.chrono.buffer.start(),i.noticeRequest("Method: /bufferStart"))}catch(e){i.error(e)}},i.managers.View.prototype.sendBufferEnd=function(e,t){try{this.isHalted()||this.isJoinSent&&this.isBuffering&&(this.isBuffering=!1,this.lastResume=(new Date).getTime(),e=this.infoManager.getBufferEndParams(e),e.duration=void 0!==e.duration?e.duration:this.chrono.buffer.getDeltaTime(),this.sendRequest("/bufferUnderrun",e,t),i.noticeRequest("Request: NQS /bufferUnderrun "+e.duration+"ms"))}catch(e){i.error(e)}},i.managers.View.prototype.sendSeekStart=function(){try{this.isHalted()||this.isJoinSent&&!this.isSeeking&&(this.isSeeking=!0,this.chrono.seek.start(),i.noticeRequest("Method: /seekStart"))}catch(e){i.error(e)}},i.managers.View.prototype.sendSeekEnd=function(e,t){try{this.isHalted()||this.isJoinSent&&this.isSeeking&&(this.isSeeking=!1,this.lastResume=(new Date).getTime(),e=this.infoManager.getSeekEndParams(e),e.duration=void 0!==e.duration?e.duration:this.chrono.seek.getDeltaTime(),this.sendRequest("/seek",e,t),i.noticeRequest("Request: NQS /seek "+e.duration+"ms"))}catch(e){i.error(e)}},i.managers.View.prototype.sendError=function(e,t){try{this.isErrorSent=!0,!this.infoManager.options.parseCDNNodeHost&&!this.infoManager.options.parseHLS||this.resourceParser.realResource||this.resourceParser.init(),this.infoManager.options.haltOnError&&this.stopTimers(),e=this.infoManager.getErrorParams(e),e.pingTime=void 0!==e.pingTime?e.pingTime:this.comm.pingTime,this.infoManager.options.parseCDNNodeHost&&(e.nodeHost=void 0!==e.nodeHost?e.nodeHost:void 0!==this.resourceParser.nodeHost?this.resourceParser.nodeHost:"",e.nodeType=void 0!==e.nodeType?e.nodeType:void 0!==this.resourceParser.nodeType?this.resourceParser.nodeType:""),this.sendRequest("/error",e,t),i.noticeRequest("Request: NQS /error "+e.msg)}catch(e){i.error(e)}},i.managers.View.prototype.convertBufferToSeek=function(){try{i.noticeRequest("Converting buffer to seek"),this.chrono.seek.startTime=this.chrono.buffer.startTime,this.chrono.seek.lastTime=0,this.chrono.buffer.stop(),this.isBuffering=!1,this.isSeeking=!0}catch(e){i.error(e)}},i.managers.View.monitoringInterval=800,i.managers.View.prototype.jumpNextTick=!1,i.managers.View.prototype.checkPlayhead=function(){if(this.isJoinSent&&!this.isShowingAds){var e=2*i.managers.View.monitoringInterval,t=i.managers.View.monitoringInterval/2,n=1.1*i.managers.View.monitoringInterval,r=this.infoManager.getPlayhead(),a=1e3*Math.abs(this.lastPlayhead-r);if(a<t){var o=this.lastResume?Math.abs((new Date).getTime()-this.lastResume):0;this.enableBufferMonitor&&(0==o||o>i.managers.View.monitoringInterval)&&this.lastPlayhead>0&&!this.isBuffering&&!this.isPaused&&!this.isSeeking&&this.sendBufferStart()}else a>e?this.enableSeekMonitor&&this.lastPlayhead>0&&!this.isSeeking&&(this.isBuffering?this.convertBufferToSeek():this.sendSeekStart()):this.isSeeking&&this.enableSeekMonitor?this.sendSeekEnd():this.isBuffering&&this.enableBufferMonitor&&this.chrono.buffer.getDeltaTime(!1)>n&&this.sendBufferEnd();this.lastPlayhead=r}},i.managers.View.prototype.checkAdPlayhead=function(){if(this.isAdJoinSent){var e=i.managers.View.monitoringInterval/2,t=1.1*i.managers.View.monitoringInterval,n=this.infoManager.getAdPlayhead();1e3*Math.abs(this.lastPlayhead-n)<e?this.enableAdBufferMonitor&&this.lastPlayhead>0&&!this.isAdBuffering&&!this.isAdPaused&&this.sendAdBufferStart():this.isAdBuffering&&this.chrono.adBuffer.getDeltaTime(!1)>t&&this.sendAdBufferEnd(),this.lastPlayhead=n}},i.managers.View.prototype.stopTimers=function(){this.timer.pinger.stop(),this.timer.playheadMonitor.stop(),this.timer.adPlayheadMonitor.stop()},i.managers.View.prototype.sendPing=function(e,t){try{e=this.infoManager.getPingParams(e),this.isShowingAds&&(e=this.infoManager.getAdPingParams(e)),e.pingTime=void 0!==e.pingTime?e.pingTime:this.comm.pingTime,this.isSeeking&&(e.seekDuration=void 0!==e.seekDuration?e.seekDuration:this.chrono.seek.getDeltaTime(!1)),this.isBuffering&&(e.bufferDuration=void 0!==e.bufferDuration?e.bufferDuration:this.chrono.buffer.getDeltaTime(!1)),this.isAdBuffering&&(e.adBufferDuration=void 0!==e.adBufferDuration?e.adBufferDuration:this.chrono.adBuffer.getDeltaTime(!1));var n=this.infoManager.getRendition();if(n&&this.lastRendition!=n&&(this.sendChangedEntity("rendition",n),this.lastRendition=n),1==this.changedEntities.length){var r=this.changedEntities.shift();e.entityType=r.key,e.entityValue=r.value}else if(this.changedEntities.length>1){e.entityType=null,e.entityValue=null,e.entities={};for(var a=0;a<this.changedEntities.length;a++)e.entities[this.changedEntities[a].key]=this.changedEntities[a].value;this.changedEntities=[]}this.sendRequest("/ping",e,t)}catch(e){i.error(e)}},i.managers.View.prototype.sendChangedEntity=function(e,t){try{this.changedEntities.push({key:e,value:t})}catch(e){i.error(e)}},i.utils.Chrono=function(){try{this.startTime=0,this.lastTime=0}catch(e){i.error(e)}},i.utils.Chrono.prototype.getDeltaTime=function(e){try{return this.startTime?0===this.lastTime?!1!==e?this.stop():(new Date).getTime()-this.startTime:this.lastTime-this.startTime:-1}catch(e){i.error(e)}},i.utils.Chrono.prototype.start=function(){try{this.startTime=(new Date).getTime(),this.lastTime=0}catch(e){i.error(e)}},i.utils.Chrono.prototype.stop=function(){try{return this.lastTime=(new Date).getTime(),this.getDeltaTime()}catch(e){i.error(e)}},i.utils.parseNumber=function(e,t){return!isNaN(e)&&e>=0&&e!=1/0&&null!==e&&void 0!==e?e:t},i.utils.listenAllEvents=function(e,t,n){try{if(i.debugLevel>=4){n=n||function(e){var t="";void 0!==e.target&&void 0!==e.target.id&&(t=e.target.id),i.debug("Event: "+t+" > "+e.type)};var r=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(null===t[0]?(t.shift(),r=t):r=r.concat(t));for(var a=0;a<r.length;a++)"function"==typeof e?e.call(window,r[a],n):e.on?e.on(r[a],n):e.addEventListener&&e.addEventListener(r[a],n)}}catch(e){i.error(e)}},i.utils.buildRenditionString=function(e,t,n){1==arguments.length&&(n=e,e=null,t=null);var r="";return e&&t&&(r=e+"x"+t,n>0&&(r+="@")),n<1?r:(n<1e3?r+=Math.round(n)+"bps":n<1e6?(n=Math.round(n/1e3),r+=n+"Kbps"):(n=Math.round(n/1e4)/100,r+=n+"Mbps"),r)},i.debugLevel=2,i.messageLevels={1:"e",2:"w",3:"n",4:"d",5:"v"},i.plainConsole=!1,i.report=function(e,t,n){if(console&&console.log){t=t||4,n=n||"darkcyan";var r=i.messageLevels[t],a=i.getCurrentTime()+"[Youbora] "+r+":";if(void 0!==i.remoteLog&&!0===i.remoteLog.enabled&&i.remoteLog(a+e),i.debugLevel>=t)if(i.plainConsole||document.documentMode)i.plainReport(e,a);else{var o=console.log;1==t&&console.error?o=console.error:2==t&&console.warn?o=console.warn:t>=4&&console.debug&&(o=console.debug),a="%c"+a,e instanceof Array?(e.splice(0,0,a,"color: "+n),o.apply(console,e)):o.call(console,a,"color: "+n,e)}}},i.getCurrentTime=function(e){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},i.plainReport=function(e,t){if(e instanceof Array)for(var n in e)i.plainReport(e[n],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+" <next line>"),console.log(e))},i.error=function(){i.report([].slice.call(arguments),1,"darkred")},i.warn=function(){i.report([].slice.call(arguments),2,"darkorange")},i.notice=function(){i.report([].slice.call(arguments),3,"darkcyan")},i.noticeRequest=function(){i.report([].slice.call(arguments),3,"darkgreen")},i.debug=function(){i.report([].slice.call(arguments),4,"indigo")},i.verbose=function(){i.report([].slice.call(arguments),5,"navy")},function(){function e(e){switch(e){case"plain":i.plainConsole=!0;break;case"remote":i.remoteLog.forced=!0;break;case"plain+remote":case"remote+plain":i.remoteLog.forced=!0,i.plainConsole=!0}}try{if("undefined"!=typeof window){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].getAttribute){var r=t[n].getAttribute("youbora-debug");r&&(i.debugLevel=r),(r=t[n].getAttribute("youbora-console"))&&e(r)}var a=/\?.*\&*youbora-debug=(.+)/i.exec(window.location.search);null!==a&&(i.debugLevel=a[1]),null!==(a=/\?.*\&*youbora-console=(.+)/i.exec(window.location.search))&&e(a[1])}}catch(e){i.error(e)}}(),i.utils.ResourceParser=function(e){try{this.viewManager=e,this.parseTimeout=null,this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdn,this.cdnRequests={},this.cdns=i.utils.ResourceParser.cdnsEnabled.slice()}catch(e){i.error(e)}},i.utils.ResourceParser.prototype.init=function(){try{this.realResource&&this.clear(),this.viewManager.comm.addPreloader("ResourceParser");var e=this;this.viewManager.comm.extraOperationsCallback=function(t){void 0!==t.resource&&e.realResource&&(t.resource=e.realResource),void 0!==t.nodeHost&&e.nodeHost&&(t.nodeHost=e.nodeHost,t.nodeType=e.nodeType),!t.cdn&&e.viewManager.infoManager.options.useCDNFromParser&&(t.cdn=e.cdn)},this.parseTimeout=setTimeout(function(){"ResourceParser"in e.viewManager.comm.preloaders&&(e.realResource=e.viewManager.infoManager.getResource(),e.viewManager.comm.removePreloader("ResourceParser"),i.warn("ResourceParser has exceded the maximum execution time (3s) and will be aborted."))},3e3),this.realResource=this.viewManager.infoManager.getResource(),this.viewManager.infoManager.options.parseHLS?this._parseRealResourceAsync(this.realResource):this._parseCDNAsync()}catch(e){i.error(e)}},i.utils.ResourceParser.prototype.clear=function(){this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdnRequests={},this.cdns=i.utils.ResourceParser.cdnsEnabled.slice()},i.utils.ResourceParser.prototype._parseRealResourceAsync=function(e,t){try{var n=/(\S*?(\.m3u8|\.m3u|\.ts|\.mp4)(\?\S*|\n|\r|$))/i.exec(e);if(null!==n){var r=n[1].trim();if(0!==r.indexOf("http")&&0!==r.indexOf("//")&&(r=t.slice(0,t.lastIndexOf("/"))+"/"+r),".m3u8"==n[2]||".m3u"==n[2]){var a=this;new i.comm.AjaxRequest(r).load(function(){a._parseRealResourceAsync(this.responseText,r)}).error(function(){a._parseCDNAsync()}).send()}else this.realResource=r,this._parseCDNAsync()}else this._parseCDNAsync()}catch(e){i.error(e),this._parseCDNAsync()}},i.utils.ResourceParser.cdnsEnabled=["Level3","Akamai","Highwinds","Fastly"],i.utils.ResourceParser.cdnsAvailable={Level3:{code:"LEVEL3",parsers:[{type:"host+type",name:"X-WR-DIAG",regex:/Host:(.+)\sType:(.+)/}],headers:{"X-WR-DIAG":"host"}},Akamai:{code:"AKAMAI",parsers:[{type:"host+type",name:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).+/}]},Highwinds:{code:"HIGHNEGR",parsers:[{type:"host+type",name:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}]},Fastly:{code:"FASTLY",parsers:[{type:"host",name:"X-Served-By",regex:/([^,\s]+)$/},{type:"type",name:"X-Cache",regex:/([^,\s]+)$/}]},Telefonica:{code:"TELEFO",parsers:[{type:"host+type",name:"X-TCDN",regex:/Host:(.+)\sType:(.+)/}]},CustomCDN:{code:null,parsers:[{type:"name",regex:/(.+)/}]}},i.utils.ResourceParser.prototype._parseCDNAsync=function(){try{if(this.viewManager.infoManager.options.parseCDNNodeHost)if(this.cdns.length>0&&!this.nodeHost){var e=this.cdns.shift();if(void 0!==i.utils.ResourceParser.cdnsAvailable[e]){var t=i.utils.ResourceParser.cdnsAvailable[e],n=JSON.stringify(t.headers);if(this.cdnRequests.hasOwnProperty(n))this._parseNode(t,this.cdnRequests[n]);else{var r=this,a=new i.comm.AjaxRequest(this.realResource,"","",{method:"HEAD",maxRetries:0,requestHeaders:t.headers});a.load(function(){r.cdnRequests[n]=a.getXHR(),r._parseNode(t,a.getXHR())}),a.error(function(){r._parseCDNAsync()}),a.send()}}else this._parseCDNAsync()}else this.viewManager.comm.removePreloader("ResourceParser");else this.viewManager.comm.removePreloader("ResourceParser")}catch(e){i.error(e)}},i.utils.ResourceParser.prototype._parseNode=function(e,t){try{var n=e.parsers;for(var r in n){"name"==n[r].type&&(n[r].name=this.viewManager.infoManager.options.parseCDNNameFrom);var a=t.getResponseHeader(n[r].name);if(null===a)return void this._parseCDNAsync();var o=n[r].regex.exec(a);if(null===o)return void this._parseCDNAsync();switch(n[r].type){case"host":this.nodeHost=o[1];break;case"type":this.nodeType=this._parseNodeType(o[1]);break;case"host+type":this.nodeHost=o[1],this.nodeType=this._parseNodeType(o[2]);break;case"type+host":this.nodeType=this._parseNodeType(o[1]),this.nodeHost=o[2];break;case"name":this.cdn=o[1].toUpperCase()}e.code&&(this.cdn=e.code)}this._parseCDNAsync()}catch(e){i.error(e),this._parseCDNAsync()}},i.utils.ResourceParser.prototype._parseNodeType=function(e){try{switch(e){case"TCP_HIT":case"HIT":case"c":return 1;case"TCP_MISS":case"MISS":case"p":case"i":case"m":return 2;case"TCP_MEM_HIT":return 3;case"TCP_IMS_HIT":return 4;default:return 0}}catch(e){return i.error(e),0}},i.utils.Timer=function(e,t){try{this.callback=e,this.interval=t||5e3,this.isRunning=!1,this.timer=null,this.chrono=new i.utils.Chrono}catch(e){i.error(e)}},i.utils.Timer.prototype.start=function(){try{this.isRunning=!0,this._setPing()}catch(e){i.error(e)}},i.utils.Timer.prototype.stop=function(){try{this.isRunning=!1,clearTimeout(this.timer)}catch(e){i.error(e)}},i.utils.Timer.prototype._setPing=function(){try{if(this.isRunning){this.chrono.start();var e=this;this.timer=setTimeout(function(){e.callback(e.chrono.stop()),e._setPing()},this.interval)}}catch(e){i.error(e)}},void 0!==e&&e.exports?e.exports=i:window.$YB=i},function(e,t){e.exports={name:"playkit-js-youbora",version:"0.1.0",main:"dist/playkit-youbora.js",scripts:{clean:"rm -rf ./dist",prebuild:"npm run clean","build:prod":"NODE_ENV=production webpack",build:"webpack",dev:"webpack --progress --colors --watch",test:"NODE_ENV=test karma start --color","test:chrome":"NODE_ENV=test karma start --color --browsers Chrome","test:chrome:dots":"NODE_ENV=test karma start --color --browsers Chrome --reporters dots","test:firefox":"NODE_ENV=test karma start --color --browsers Firefox","test:safari":"NODE_ENV=test karma start --color --browsers Safari","test:watch":"NODE_ENV=test karma start --color --auto-watch",start:"webpack-dev-server",release:"standard-version",publish:"git push --follow-tags --no-verify origin master",eslint:"eslint . --color",flow:"flow check","eslint:flow:test":"npm run eslint && npm run flow && npm run test","commit:dist":"git add --force --all dist && (git commit -m 'chore: update dist' || exit 0)"},"standard-version":{scripts:{postbump:"yarn run build && yarn run build:prod && npm run commit:dist"}},devDependencies:{"babel-cli":"^6.18.0","babel-core":"^6.18.2","babel-eslint":"^7.1.1","babel-loader":"^6.2.7","babel-plugin-istanbul":"^4.0.0","babel-plugin-transform-class-properties":"^6.22.0","babel-plugin-transform-flow-strip-types":"^6.22.0","babel-preset-es2015":"^6.18.0","babel-register":"^6.23.0",chai:"^3.5.0","cross-env":"^3.1.4","css-loader":"^0.28.4",eslint:"^3.10.0","eslint-loader":"^1.6.1","eslint-plugin-flowtype":"^2.30.0","eslint-plugin-import":"^2.2.0","eslint-plugin-mocha-no-only":"^0.0.5","flow-bin":"latest",istanbul:"^0.4.5",karma:"^1.5.0","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-cli":"^1.0.1","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.0.1","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.2",mocha:"^3.2.0","mocha-cli":"^1.0.1","playkit-js":"https://github.com/kaltura/playkit-js.git#v0.3.0","pre-push":"^0.1.1",sinon:"^2.0.0","sinon-chai":"^2.8.0","standard-version":"^4.2.0","style-loader":"^0.18.2","uglifyjs-webpack-plugin":"^0.4.3",webpack:"latest","webpack-dev-server":"latest"},peerDependencies:{"playkit-js":"https://github.com/kaltura/playkit-js.git#v0.3.0"},keywords:[],license:"AGPL-3.0",repository:{type:"git",url:"git+https://github.com/kaltura/playkit-js-youbora.git"},bugs:{url:"https://github.com/kaltura/playkit-js-youbora/issues"},homepage:"https://github.com/kaltura/playkit-js-youbora#readme"}}]);
//# sourceMappingURL=playkit-js-youbora.js.map